webpackJsonp([1],[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),c=a(s),f=n(48),d=a(f),h=(n(18),n(49)),m=(i(h),n(50)),p=(a(m),n(60)),v=a(p),_=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return c.default.createElement(v.default,null)}}]),t}(c.default.Component);d.default.render(c.default.createElement(_,null),document.body.appendChild(document.createElement("div")))},,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(a=i=function(){function e(){n(this,e)}return o(e,null,[{key:"MakeStateSingleton",value:function(e){e.getInstance=function(){var t=null;return function(){return null==t&&(t=new e),t}}()}},{key:"isDebug",value:function(){return!1}},{key:"logError",value:function(e){alert(e)}},{key:"log",value:function(){console.log.apply(console,arguments)}},{key:"debug",value:function(){console.log.apply(console,arguments)}},{key:"range",value:function(e,t){if(e==t-1)return e;if(e==t)return t;if(e>t){var n=t;t=e,e=n}var i=Math.floor(Math.random()*(t-e));return e+i}},{key:"rangeFloat",value:function(e,t){if(e>t){var n=t;t=e,e=n}var i=Math.random()*(t-e);return e+i}},{key:"clamp",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"shuffle",value:function(t){for(var n=t.length,i=void 0,a=void 0;n>0;)i=e.range(0,n),a=t[i],t[i]=t[n-1],t[n-1]=a,n--}},{key:"getTimeHMS",value:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}]),e}(),i.version="0.1.1",i.CanvasWidth=600,i.CanvasHeight=500,a);t.default=r},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(14),s=i(u),c=n(2),f=i(c),d=n(15),h=i(d),m=n(20),p=i(m),v=n(55),_=i(v),y=(r=o=function(){function e(){a(this,e),this.m_lastMS=0,this.m_universe=null,this.m_isStart=!1,this.m_universe=new _.default}return l(e,null,[{key:"getInstance",value:function(){return null===e.m_instacne&&(e.m_instacne=new e),e.m_instacne}}]),l(e,[{key:"checkConfigIsInited",value:function(){f.default.log("checkCOnfig...",h.default.get("galaxyCount")),s.default.isNull(h.default.get("galaxyCount"))&&this.resetConfig()}},{key:"resetConfig",value:function(){h.default.set("galaxyCount",1e3),h.default.set("civiCount",100),h.default.set("techMin",1),h.default.set("techMax",1.5),h.default.set("techExplodeRate",5e-4),h.default.set("explodeAddMin",.5),h.default.set("explodeAddMax",5),h.default.set("maxTechFromTouch",.015),h.default.set("techAddSpeed",.001),h.default.set("lifeLostPerRound",.0015),h.default.set("maxOptCount",80)}},{key:"start",value:function(){null!=this.m_universe&&this.m_universe.clear(),this.m_isStart=!0;var e=this.m_universe.loadConfig();e&&(this.m_lastMS=Date.now(),this.m_universe.m_universeView.initUnitversView(),this.update())}},{key:"update",value:function(){requestAnimationFrame(this.update.bind(this));var e=Date.now(),t=(e-this.m_lastMS)/1e3;this.m_lastMS=e,this.m_universe.update(t),p.default.getInstance().update(t)}}]),e}(),o.renderEnable=!0,o.m_instacne=null,r);t.default=y},,,,function(e,t){e.exports=antd},,,,,,function(e,t){e.exports=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(47),l=i(r),u=function(){function e(){a(this,e)}return o(e,null,[{key:"set",value:function(e,t){l.default.set(e,t)}},{key:"remove",value:function(e){l.default.remove(e)}},{key:"get",value:function(e){return l.default.get(e)}}]),e}();t.default=u},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),s=i(u),c=n(4),f=i(c),d=(r=o=function(){function e(){a(this,e)}return l(e,null,[{key:"log",value:function(t,n){0!=e.enable&&(t<=1||s.default.log(s.default.getTimeHMS(),f.default.getInstance().m_universe.m_round+"回合",n))}}]),e}(),o.enable=!1,r);t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ScheduleUtilItem=void 0;var o,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),s=(i(u),t.ScheduleUtilItem=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,e),this.m_callback=null,this.m_target=null,this.m_interval=0,this.m_intevalAdded=0,this.m_delay=0,this.m_isValid=!0,this.m_callback=t,this.m_target=n,this.m_delay=o,this.m_interval=i,this.m_isValid=!0}return l(e,[{key:"update",value:function(e){return this.m_delay>0&&e<=this.m_delay?void(this.m_delay-=e):(this.m_delay>0&&e>this.m_delay&&(e-=this.m_delay,this.m_delay=0),this.m_intevalAdded+=e,this.m_intevalAdded>=this.m_interval&&(this.m_interval,this.m_callback.call(this.m_target,this.m_intevalAdded),this.m_intevalAdded=0),void 0)}}]),e}()),c=(r=o=function(){function e(){a(this,e),this.m_timeScale=1,this.m_lastTimeLeft=0,this.m_scheduleList=null,this.m_secondPerFrame=1/30,this.m_needCheckRemove=!1,this.m_scheduleList=[]}return l(e,null,[{key:"getInstance",value:function(){return null===e.m_instacne&&(e.m_instacne=new e),e.m_instacne}}]),l(e,[{key:"update",value:function(e){e<0||(e*=this.m_timeScale,this._updateFuction(e))}},{key:"_removeItemUnValid",value:function(){if(this.m_needCheckRemove){this.m_needCheckRemove=!1;for(var e=0;e<this.m_scheduleList.length;e++)this.m_scheduleList[e].m_isValid||(this.m_scheduleList.splice(e,1),e--)}}},{key:"_updateFuction",value:function(e){for(var t=0;t<this.m_scheduleList.length;t++){var n=this.m_scheduleList[t];n.m_isValid&&n.update(e)}this._removeItemUnValid()}},{key:"setTimeScale",value:function(e){this.m_timeScale=e}},{key:"addSchedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new s(e,t,n,i);return this.m_scheduleList.push(a),a}},{key:"removeScheduleItem",value:function(e){e.m_isValid=!1,this.m_needCheckRemove=!0}},{key:"removeSchedule",value:function(e,t){for(var n=!0;n;){for(var i=0;i<this.m_scheduleList.length;i++){var a=this.m_scheduleList[i];if(a.m_callback==e&&a.m_target==t){this.removeScheduleItem(a),n=!0;break}}n=!1}}},{key:"removeScheduleByCallback",value:function(e){for(var t=!0;t;){for(var n=0;n<this.m_scheduleList.length;n++){var i=this.m_scheduleList[n];if(i.m_callback==e){this.removeScheduleItem(i),t=!0;break}}t=!1}}},{key:"removeScheduleByTarget",value:function(e){for(var t=!0;t;){for(var n=0;n<this.m_scheduleList.length;n++){var i=this.m_scheduleList[n];if(i.m_target==e){this.removeScheduleItem(i),t=!0;break}}t=!1}}},{key:"removeAllSchedule",value:function(){for(var e=0;e<this.m_scheduleList.length;e++){var t=this.m_scheduleList[e];t.m_isValid=!1}this.m_scheduleList=[]}}]),e}(),o.m_instacne=null,r);t.default=c},,,,,,,,,function(e,t){e.exports=THREE},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=n(8),f=n(18),d=n(34),h=i(d);n(96);var m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={welcome:"hello world"},n.afterChange=n.afterChange.bind(n),n.handleImageLoaded=n.handleImageLoaded.bind(n),n.handleImageErrored=n.handleImageErrored.bind(n),n}return r(t,e),l(t,[{key:"componentDidUpdate",value:function(e,t){console.log("Head Update")}},{key:"afterChange",value:function(e,t,n){console.log(e,t,n)}},{key:"handleImageLoaded",value:function(e,t){}},{key:"handleImageErrored",value:function(e,t){}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:"normal"},s.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},s.default.createElement("div",{style:{height:"150px",width:"350px"}},s.default.createElement(c.Carousel,{afterChange:this.afterChange},s.default.createElement("img",{src:h.default.getImg("img_1"),onLoad:this.handleImageLoaded,onError:this.handleImageErrored}),s.default.createElement("img",{src:h.default.getImg("img_2")}),s.default.createElement("img",{src:h.default.getImg("img_3")})))),s.default.createElement("div",{style:{marginTop:"10px"}},s.default.createElement(c.Input,{ref:"_newValue",placeholder:"input here",onChange:function(t){e.setState({welcome:t.target.value})}})),s.default.createElement("div",{style:{margin:"5px"}},this.state.welcome),s.default.createElement(c.Button,{type:"primary",onClick:function(){f.browserHistory.push("/")}},"goto index"))}}]),t}(s.default.PureComponent);t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(2),r=i(o);r.default.log("BaseObject...");var l=function e(){a(this,e),this.m_x=0,this.m_y=0,this.m_z=0};t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(14),s=i(u),c=n(2),f=i(c),d=function e(t){a(this,e),this.tag="",this.timeUsed=0,this.startTime=0,this.tag=t},h=(r=o=function(){function e(){a(this,e),this.items=[]}return l(e,[{key:"getItemByTag",value:function(e){for(var t=null,n=0;n<this.items.length;n++)if(this.items[n].tag===e){t=this.items[n];break}return t}},{key:"startByTag",value:function(e){var t=this.getItemByTag(e);null==t&&(t=new d(e),this.items.push(t)),t.startTime=Date.now()}},{key:"endByTag",value:function(e){var t=this.getItemByTag(e);if(null!=t){var n=Date.now();t.timeUsed+=n-t.startTime}}},{key:"showTimeUsedByTag",value:function(e){var t=this.getItemByTag(e);null!=t&&f.default.log("time "+t.tag+" - "+t.timeUsed)}},{key:"showTimeAndRemove",value:function(e){this.endByTag(e),this.showTimeUsedByTag(e),this.removeByTag(e)}},{key:"ShowAllTimeUsed",value:function(){for(var e=0;e<this.items.length;e++)f.default.log("time "+this.items[e].tag+" - "+this.items[e].timeUsed)}},{key:"removeByTag",value:function(e){s.default.remove(this.items,function(t){return t.tag===e})}},{key:"removeAll",value:function(){this.items=[]}}],[{key:"getInstance",value:function(){return null===e.m_instacne&&(e.m_instacne=new e),e.m_instacne}}]),e}(),o.m_instacne=null,r);t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(97),l=i(r),u=n(98),s=i(u),c=n(99),f=i(c),d=n(101),h=i(d),m=n(100),p=i(m),v=function(){function e(){a(this,e)}return o(e,null,[{key:"getImg",value:function(e){switch(e){case"img_1":return l.default;case"img_2":return s.default;case"img_3":return f.default;case"zfb":return h.default;case"wx":return p.default;default:return null}}}]),e}();t.default=v},,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.View404=t.User=t.Users=t.TestViewSubViewContainer=t.ViewTestSubAnother=t.ViewTestSubIndex=t.ViewHome=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=n(8),f=n(18),d=n(31),h=i(d),m=t.ViewHome=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(h.default,null),s.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"}},s.default.createElement("div",{style:{display:"flex",height:"400px",flexDirection:"row",alignItems:"stretch",margin:"10px",background:"#00cc00"}},s.default.createElement("div",null,s.default.createElement(c.Button,{onClick:function(){f.browserHistory.push("/testview")}},"testview"),s.default.createElement(c.Button,{onClick:function(){f.browserHistory.push("/users")}},"users"),s.default.createElement(c.Button,{onClick:function(){f.browserHistory.push("/viewtestmobx")}},"mobx"),s.default.createElement("div",null,s.default.createElement(c.DatePicker,null)))),s.default.createElement("div",{style:{fontSize:"20px"}},s.default.createElement("div",null,"ssss"),"footer")))}}]),t}(s.default.Component),p=(t.ViewTestSubIndex=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("h2",null,"ViewTestIndex"),s.default.createElement(c.Button,{onClick:function(){f.browserHistory.push("/testview/ViewTestSubAnother")}},"ViewTestSubAnother"))}}]),t}(s.default.Component),t.ViewTestSubAnother=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("h2",null,"sub view"))}}]),t}(s.default.Component),t.TestViewSubViewContainer=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(h.default,null),s.default.createElement("div",null,"TestViewSubViewContainer"),this.props.children)}}]),t}(s.default.Component),t.Users=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={users:[{id:1,name:"a"},{id:2,name:"b"},{id:3,name:"c"}]},n}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(h.default,null),s.default.createElement("h1",null,"Users"),s.default.createElement("div",{className:"master"},s.default.createElement("ul",null,this.state.users.map(function(e){return s.default.createElement("li",{key:e.id},s.default.createElement(f.Link,{to:"/user/"+e.id},e.name))}))),s.default.createElement("div",{className:"detail"},this.props.children))}}]),t}(s.default.Component)),v=t.User=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{name:"111"}},n}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(h.default,null),s.default.createElement("h2",null,this.state.user.name),s.default.createElement("h2",null,this.props.params.userId))}}]),t}(s.default.Component),_=t.View404=s.default.createClass({displayName:"View404",render:function(){return s.default.createElement("div",null,s.default.createElement(h.default,null),s.default.createElement("h2",null,"404"))}}),y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement(f.Router,{history:f.browserHistory},s.default.createElement(f.Route,{path:"/",component:m}),s.default.createElement(f.Route,{path:"users",component:p}),s.default.createElement(f.Route,{path:"user/:userId",component:v}),s.default.createElement(f.Route,{path:"testview",component:TestView}),s.default.createElement(f.Route,{path:"*",component:_}))}}]),t}(s.default.Component);t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n,i,a){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,c,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(1),m=i(h),p=n(30),v=n(12),_=n(31),y=i(_),b=n(2),g=i(b),E=(s=function(){function e(){l(this,e),r(this,"number",c,this),this.number=0}return d(e,[{key:"doAdd",value:function(){this.number++}}]),e}(),c=u(s.prototype,"number",[p.observable],{enumerable:!0,initializer:null}),s),w=function(e){function t(){var e,n,i,o;l(this,t);for(var r=arguments.length,u=Array(r),s=0;s<r;s++)u[s]=arguments[s];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.state={x:1},o=n,a(i,o)}return o(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;this.m_interver=setInterval(function(){e.setState({x:Math.random()})},1e3)}},{key:"render",value:function(){return m.default.createElement("div",null,this.state.x)}},{key:"componentDidUpdate",value:function(e,t){g.default.log("TestRender DidUpdate")}},{key:"componentWillUnmount",value:function(){this.m_interver&&clearInterval(this.m_interver),this.m_interver=null}}]),t}(m.default.PureComponent),C=(0,v.observer)(f=function(e){function t(e){l(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderCount=0,n.store=new E,n.on_change=function(){n.store.doAdd()},n.startInterver=n.startInterver.bind(n),n.stopInterver=n.stopInterver.bind(n),n}return o(t,e),d(t,[{key:"componentDidUpdate",value:function(e,t){g.default.log("ViewTestMobx DidUpdate")}},{key:"componentWillUnmount",value:function(){this.stopInterver()}},{key:"startInterver",value:function(){var e=this;this.m_interver=setInterval(function(){e.store.number++},1e3),g.default.log("this.m_interver",this.m_interver)}},{key:"stopInterver",value:function(){this.m_interver&&clearInterval(this.m_interver),this.m_interver=null}},{key:"render",value:function(){return this.renderCount++,m.default.createElement("div",null,m.default.createElement(y.default,null),m.default.createElement("h1",null,this.store.number),m.default.createElement("h1",null,"render count ",this.renderCount),m.default.createElement("div",{style:{margin:"10px",display:"flex",justifyContent:"space-between"}},m.default.createElement("button",{onClick:this.on_change},"add"),m.default.createElement("button",{onClick:this.startInterver},"startInterver"),m.default.createElement("button",{onClick:this.stopInterver},"stopInterver")),m.default.createElement(w,null))}}]),t}(m.default.Component))||f;t.default=C},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var a=n(29),o=i(a);o.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*A.autoRotateSpeed}function i(){return Math.pow(.95,A.zoomSpeed)}function a(e){U.theta-=e}function r(e){U.phi-=e}function l(e){A.object instanceof o.PerspectiveCamera?F/=e:A.object instanceof o.OrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom*e)),A.object.updateProjectionMatrix(),Y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function u(e){A.object instanceof o.PerspectiveCamera?F*=e:A.object instanceof o.OrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom/e)),A.object.updateProjectionMatrix(),Y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function s(e){X.set(e.clientX,e.clientY)}function c(e){J.set(e.clientX,e.clientY)}function f(e){K.set(e.clientX,e.clientY)}function d(e){W.set(e.clientX,e.clientY),Z.subVectors(W,X);var t=A.domElement===document?A.domElement.body:A.domElement;a(2*Math.PI*Z.x/t.clientWidth*A.rotateSpeed),r(2*Math.PI*Z.y/t.clientHeight*A.rotateSpeed),X.copy(W),A.update()}function h(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?l(i()):ee.y<0&&u(i()),J.copy($),A.update()}function m(e){q.set(e.clientX,e.clientY),Q.subVectors(q,K),ie(Q.x,Q.y),K.copy(q),A.update()}function p(e){}function v(e){e.deltaY<0?u(i()):e.deltaY>0&&l(i()),A.update()}function _(e){switch(e.keyCode){case A.keys.UP:ie(0,A.keyPanSpeed),A.update();break;case A.keys.BOTTOM:ie(0,-A.keyPanSpeed),A.update();break;case A.keys.LEFT:ie(A.keyPanSpeed,0),A.update();break;case A.keys.RIGHT:ie(-A.keyPanSpeed,0),A.update()}}function y(e){X.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);J.set(0,i)}function g(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function E(e){W.set(e.touches[0].pageX,e.touches[0].pageY),Z.subVectors(W,X);var t=A.domElement===document?A.domElement.body:A.domElement;a(2*Math.PI*Z.x/t.clientWidth*A.rotateSpeed),r(2*Math.PI*Z.y/t.clientHeight*A.rotateSpeed),X.copy(W),A.update()}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);$.set(0,a),ee.subVectors($,J),ee.y>0?u(i()):ee.y<0&&l(i()),J.copy($),A.update()}function C(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(q,K),ie(Q.x,Q.y),K.copy(q),A.update()}function x(e){}function O(e){if(A.enabled!==!1){if(e.preventDefault(),e.button===A.mouseButtons.ORBIT){if(A.enableRotate===!1)return;s(e),L=H.ROTATE}else if(e.button===A.mouseButtons.ZOOM){if(A.enableZoom===!1)return;c(e),L=H.DOLLY}else if(e.button===A.mouseButtons.PAN){if(A.enablePan===!1)return;f(e),L=H.PAN}L!==H.NONE&&(document.addEventListener("mousemove",k,!1),document.addEventListener("mouseup",P,!1),A.dispatchEvent(D))}}function k(e){if(A.enabled!==!1)if(e.preventDefault(),L===H.ROTATE){if(A.enableRotate===!1)return;d(e)}else if(L===H.DOLLY){if(A.enableZoom===!1)return;h(e)}else if(L===H.PAN){if(A.enablePan===!1)return;m(e)}}function P(e){A.enabled!==!1&&(p(e),document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",P,!1),A.dispatchEvent(G),L=H.NONE)}function T(e){A.enabled===!1||A.enableZoom===!1||L!==H.NONE&&L!==H.ROTATE||(e.preventDefault(),e.stopPropagation(),v(e),A.dispatchEvent(D),A.dispatchEvent(G))}function R(e){A.enabled!==!1&&A.enableKeys!==!1&&A.enablePan!==!1&&_(e)}function I(e){if(A.enabled!==!1){switch(e.touches.length){case 1:if(A.enableRotate===!1)return;y(e),L=H.TOUCH_ROTATE;break;case 2:if(A.enableZoom===!1)return;b(e),L=H.TOUCH_DOLLY;break;case 3:if(A.enablePan===!1)return;g(e),L=H.TOUCH_PAN;break;default:L=H.NONE}L!==H.NONE&&A.dispatchEvent(D)}}function M(e){if(A.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(A.enableRotate===!1)return;if(L!==H.TOUCH_ROTATE)return;E(e);break;case 2:if(A.enableZoom===!1)return;if(L!==H.TOUCH_DOLLY)return;w(e);break;case 3:if(A.enablePan===!1)return;if(L!==H.TOUCH_PAN)return;C(e);break;default:L=H.NONE}}function j(e){A.enabled!==!1&&(x(e),A.dispatchEvent(G),L=H.NONE)}function S(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:o.MOUSE.LEFT,ZOOM:o.MOUSE.MIDDLE,PAN:o.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.reset=function(){A.target.copy(A.target0),A.object.position.copy(A.position0),A.object.zoom=A.zoom0,A.object.updateProjectionMatrix(),A.dispatchEvent(z),A.update(),L=H.NONE},this.update=function(){var t=new o.Vector3,i=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),r=i.clone().inverse(),l=new o.Vector3,u=new o.Quaternion;return function(){var e=A.object.position;return t.copy(e).sub(A.target),t.applyQuaternion(i),V.setFromVector3(t),A.autoRotate&&L===H.NONE&&a(n()),V.theta+=U.theta,V.phi+=U.phi,V.theta=Math.max(A.minAzimuthAngle,Math.min(A.maxAzimuthAngle,V.theta)),V.phi=Math.max(A.minPolarAngle,Math.min(A.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=F,V.radius=Math.max(A.minDistance,Math.min(A.maxDistance,V.radius)),A.target.add(N),t.setFromSpherical(V),t.applyQuaternion(r),e.copy(A.target).add(t),A.object.lookAt(A.target),A.enableDamping===!0?(U.theta*=1-A.dampingFactor,U.phi*=1-A.dampingFactor):U.set(0,0,0),F=1,N.set(0,0,0),!!(Y||l.distanceToSquared(A.object.position)>B||8*(1-u.dot(A.object.quaternion))>B)&&(A.dispatchEvent(z),l.copy(A.object.position),u.copy(A.object.quaternion),Y=!1,!0)}}(),this.dispose=function(){A.domElement.removeEventListener("contextmenu",S,!1),A.domElement.removeEventListener("mousedown",O,!1),A.domElement.removeEventListener("wheel",T,!1),A.domElement.removeEventListener("touchstart",I,!1),A.domElement.removeEventListener("touchend",j,!1),A.domElement.removeEventListener("touchmove",M,!1),document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",P,!1),window.removeEventListener("keydown",R,!1)};var A=this,z={type:"change"},D={type:"start"},G={type:"end"},H={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},L=H.NONE,B=1e-6,V=new o.Spherical,U=new o.Spherical,F=1,N=new o.Vector3,Y=!1,X=new o.Vector2,W=new o.Vector2,Z=new o.Vector2,K=new o.Vector2,q=new o.Vector2,Q=new o.Vector2,J=new o.Vector2,$=new o.Vector2,ee=new o.Vector2,te=function(){var e=new o.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),N.add(e)}}(),ne=function(){var e=new o.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),N.add(e)}}(),ie=function(){var e=new o.Vector3;return function(t,n){var i=A.domElement===document?A.domElement.body:A.domElement;if(A.object instanceof o.PerspectiveCamera){
var a=A.object.position;e.copy(a).sub(A.target);var r=e.length();r*=Math.tan(A.object.fov/2*Math.PI/180),te(2*t*r/i.clientHeight,A.object.matrix),ne(2*n*r/i.clientHeight,A.object.matrix)}else A.object instanceof o.OrthographicCamera?(te(t*(A.object.right-A.object.left)/A.object.zoom/i.clientWidth,A.object.matrix),ne(n*(A.object.top-A.object.bottom)/A.object.zoom/i.clientHeight,A.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),A.enablePan=!1)}}();A.domElement.addEventListener("contextmenu",S,!1),A.domElement.addEventListener("mousedown",O,!1),A.domElement.addEventListener("wheel",T,!1),A.domElement.addEventListener("touchstart",I,!1),A.domElement.addEventListener("touchend",j,!1),A.domElement.addEventListener("touchmove",M,!1),window.addEventListener("keydown",R,!1),this.update()},o.OrbitControls.prototype=Object.create(o.EventDispatcher.prototype),o.OrbitControls.prototype.constructor=o.OrbitControls,Object.defineProperties(o.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.mode=0,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.frames=0,this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",this.container.addEventListener("click",function(t){t.preventDefault(),e.showPanel(++e.mode%e.container.children.length)},!1),this.fpsPanel=this.addPanel(new i("FPS","#0ff","#002")),this.msPanel=this.addPanel(new i("MS","#0f0","#020")),self.performance&&self.performance.memory&&(this.memPanel=this.addPanel(new i("MB","#f08","#201"))),this.dom=this.container,this.domElement=this.container,this.setMode=this.showPanel,this.showPanel(0)}return e.prototype.addPanel=function(e){return this.container.appendChild(e.dom),e},e.prototype.showPanel=function(e){for(var t=0;t<this.container.children.length;t++)this.container.children[t].style.display=t===e?"block":"none";this.mode=e},e.prototype.begin=function(){this.beginTime=(performance||Date).now()},e.prototype.end=function(){this.frames++;var e=(performance||Date).now();if(this.msPanel.update(e-this.beginTime,200),e>this.prevTime+1e3&&(this.fpsPanel.update(1e3*this.frames/(e-this.prevTime),100),this.prevTime=e,this.frames=0,this.memPanel)){var t=performance.memory;this.memPanel.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},e.prototype.update=function(){this.beginTime=this.end()},e}();t.Stats=n;var i=function(){function e(e,t,n){this.name=e,this.fg=t,this.bg=n,this.min=1/0,this.max=0,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=80*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=74*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=this.WIDTH,this.canvas.height=this.HEIGHT,this.canvas.style.cssText="width:80px;height:48px",this.context=this.canvas.getContext("2d"),this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=n,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=t,this.context.fillText(e,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=n,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.dom=this.canvas}return e.prototype.update=function(e,t){this.min=Math.min(this.min,e),this.max=Math.max(this.max,e),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(Math.round(e)+" "+name+" ("+Math.round(this.min)+"-"+Math.round(this.max)+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,Math.round((1-e/t)*this.GRAPH_HEIGHT))},e}();t.default=n},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(14),c=a(s),f=n(29),d=i(f),h=n(2),m=a(h),p=n(19),v=a(p),_=n(15),y=(a(_),n(32)),b=a(y),g=function(e){function t(e,n,i){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.m_id=0,a.m_universe=null,a.m_createTime=0,a.m_birthGalaxy=null,a.m_controlGalaxies=null,a.m_life=0,a.m_tech=0,a.m_initTech=0,a.m_techAddSpeed=0,a.m_techExplodeRate=0,a.m_friendliness=1,a.m_active=0,a.m_techExplodeCount=0,a.m_techAddByNormal=0,a.m_techAddByExplode=0,a.m_techAddByTouch=0,a.m_baseSearchDistance=0,a.m_isDead=!1,a.m_currentLeftOptCount=0,a.m_currentTouchedFriendlyCivis=[],a.m_color=new d.Color,a.m_id=e,a.m_universe=n,a.m_birthGalaxy=i,a.m_x=a.m_birthGalaxy.m_x,a.m_y=a.m_birthGalaxy.m_y,a.m_z=a.m_birthGalaxy.m_z,a.m_createTime=n.m_currentTime,a.m_controlGalaxies=[],a.addGalaxy(i),a.m_life=a.m_universe.m_lifePerGalaxy,a.m_tech=m.default.rangeFloat(a.m_universe.m_techInitMin,a.m_universe.m_techInitMax),a.m_initTech=a.m_tech.toFixed(2),a.m_techExplodeRate=a.m_universe.m_techExplodeRate,a.m_techAddSpeed=a.m_universe.m_techAddSpeed,a.m_friendliness=m.default.rangeFloat(0,1),a.m_active=1,a.m_color.setRGB(Math.random()/2+.5,Math.random()/2+.5,Math.random()/2+.5),a}return l(t,e),u(t,[{key:"onDestory",value:function(){}},{key:"getInfo",value:function(){return"ID: "+this.m_id+", tech: "+this.m_tech.toFixed(2)}},{key:"getInfoDetail",value:function(){return"ID: "+this.m_id+", tech: "+this.m_tech.toFixed(2)+" galaxies: "+this.m_controlGalaxies.length+" life: "+this.m_life.toFixed(2)}},{key:"getSearchDis",value:function(){return this.m_life/100+this.m_tech/2+this.m_baseSearchDistance}},{key:"getOpCount",value:function(){var e=m.default.clamp(Math.floor(this.m_life/300),0,20),t=m.default.clamp(Math.floor(this.m_tech/5),0,30),n=m.default.clamp(e+t,0,this.m_universe.m_countOfGalaxies/3);return n=m.default.clamp(n,0,this.m_universe.m_maxOptCount)}},{key:"getAtkCapacity",value:function(){var e=m.default.clamp(this.m_life/(100*this.m_universe.m_lifePerGalaxy),0,1),t=Math.pow(this.m_tech,1.2);return t+30*e}},{key:"getTechExplodeRate",value:function(){return this.m_techExplodeRate}},{key:"getFriendliness",value:function(){return this.m_friendliness}},{key:"changeLife",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.m_life+=e,this.m_life<=0&&e<0&&(e-=this.m_life),t&&this.m_universe.changeTotalLife(-e),this.checkDead()}},{key:"changeTech",value:function(e,t){0==t?this.m_techAddByNormal+=e:1==t?this.m_techAddByExplode+=e:2==t&&(this.m_techAddByTouch+=e),this.m_tech+=e}},{key:"addGalaxy",value:function(e){this.m_controlGalaxies.push(e),e.changeOwn(this),this.m_universe.setDirty(),1==this.m_controlGalaxies.length||(this.changeLife(this.m_universe.m_lifePerGalaxy,!1),v.default.log(1,"获得星系: "+this.getInfoDetail()+" --- galaxyId:"+e.getInfo()+" "))}},{key:"removeGalaxy",value:function(e){var t=this;c.default.remove(this.m_controlGalaxies,function(n){return n===e&&(e.changeOwn(null),t.changeLife(-t.m_universe.m_lifePerGalaxy,!1),t.m_universe.setDirty(),!0)}),this.checkDead(2)}},{key:"setDead",value:function(e){1==e?v.default.log(3,"文明毁灭 生命值不足 "+this.getInfoDetail()):v.default.log(3,"文明毁灭 丧失了最后一个星系 "+this.getInfoDetail()),this.m_isDead=!0}},{key:"checkDead",value:function(){if(!this.m_isDead)if(this.m_life<=0){this.setDead(1);for(var e=0;e<this.m_controlGalaxies.length;e++)this.m_controlGalaxies[e].changeOwn(null)}else 0==this.m_controlGalaxies.length&&(this.setDead(2),this.m_universe.changeTotalLife(this.m_life))}},{key:"canBeSearched",value:function(e){return!(e.m_tech<this.m_tech/2)}},{key:"doRound",value:function(){this.calcTechExplodeRound(),1==this.m_active&&(this.changeLife(-this.m_universe.m_lifeLostPerRound*this.m_controlGalaxies.length),this.changeTech(this.m_techAddSpeed,0)),this.m_baseSearchDistance+=.001,this.doSearch()}},{key:"calcTechExplodeRound",value:function(){if(Math.random()<this.getTechExplodeRate()){var e=m.default.range(10,20)/100*this.m_tech;e=m.default.clamp(e,this.m_universe.m_explodeAddMin,this.m_universe.m_explodeAddMax),this.changeTech(e,1),this.m_techExplodeCount++,v.default.log(3,"发生技术爆炸: 增加科技点 "+e+" - "+this.getInfoDetail())}}},{key:"resetSearchBaseDistance",value:function(){this.m_baseSearchDistance=0}},{key:"getCenterPos",value:function(){for(var e={x:0,y:0,z:0},t=0;t<this.m_controlGalaxies.length;t++)e.x+=this.m_controlGalaxies[t].m_x,e.y+=this.m_controlGalaxies[t].m_y,e.z+=this.m_controlGalaxies[t].m_z;return e.x/=this.m_controlGalaxies.length,e.y/=this.m_controlGalaxies.length,e.z/=this.m_controlGalaxies.length,e}},{key:"doSearch",value:function(){var e=this.getSearchDis();if(this.m_currentLeftOptCount=this.getOpCount(),e>=1){var t=this.getCenterPos();this.doSearchByCenter(t.x,t.y,t.z,e)}}},{key:"doSearchByCenter",value:function(e,t,n,i){var a=this.m_universe.m_currentShuffeldCivilizations,o=null,r=i*i;this.m_currentTouchedFriendlyCivis=[];for(var l=0;l<a.length;l++){if(this.m_currentLeftOptCount<=0)return;o=a[l],this.distancePowerBy(o)>r||(o.isNoController()?(this.m_currentLeftOptCount--,this.resetSearchBaseDistance(),this.addGalaxy(o)):o.m_civilization!=this&&!o.m_civilization.m_isDead&&o.m_civilization.canBeSearched(this)&&(this.m_currentLeftOptCount--,this.resetSearchBaseDistance(),this.touchWithOther(o)))}}},{key:"distancePowerBy",value:function(e){return(e.m_x-this.m_x)*(e.m_x-this.m_x)+(e.m_y-this.m_y)*(e.m_y-this.m_y)+(e.m_z-this.m_z)*(e.m_z-this.m_z)}},{key:"winForAttack",value:function(e,t){t._looseDefense(e),this.changeLife(-this.m_universe.m_lifePerGalaxy/10),this.addGalaxy(e)}},{key:"_looseDefense",value:function(e){this.removeGalaxy(e),this.changeLife(-this.m_universe.m_lifePerGalaxy/10)}},{key:"looseForAttack",value:function(e,t){this.changeLife(-this.m_universe.m_lifePerGalaxy/10*3),t._winForDefense(e)}},{key:"_winForDefense",value:function(e){this.changeLife(-this.m_universe.m_lifePerGalaxy/50)}},{key:"touchWithOther",value:function(e){var t=e.m_civilization,n=3,i=(this.getFriendliness()*(n-1)+t.getFriendliness())/n,a=Math.random();if(a<i){if(c.default.findIndex(this.m_currentTouchedFriendlyCivis,{m_id:t.m_id})>=0)return;this.m_currentTouchedFriendlyCivis.push(t);var o=m.default.range(50,100),r=this.m_universe.m_maxTechFromTouch,l=0;t.m_tech/o>r?(l=r,this.changeTech(l,2)):(l=t.m_tech/o,this.changeTech(l,2));var u=0;this.m_tech/o>r?(u=r,t.changeTech(r,2)):(u=this.m_tech/o,t.changeTech(u,2)),v.default.log(2,"进行了友善的交流:\n  "+this.getInfoDetail()+" 获得科技点："+l+"\n  "+t.getInfoDetail()+" 获得科技点："+u)}else{var s=this.getAtkCapacity()/(this.getAtkCapacity()+t.getAtkCapacity()),f=Math.random();f<s?(v.default.log(2,"发生了战争 :\n  "+this.getInfoDetail()+" 胜利\n  "+t.getInfoDetail()+" 失败"),this.winForAttack(e,t)):(v.default.log(2,"发生了战争:\n  "+this.getInfoDetail()+" 失败\n  "+t.getInfoDetail()+" 胜利"),this.looseForAttack(e,t))}}}]),t}(b.default);t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),s=i(u),c=n(32),f=i(c);s.default.log("Galaxy...");var d=function(e){function t(e,n,i,r,l){a(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.m_id=0,u.m_universe=null,u.m_civilization=null,u.m_randomX=0,u.m_randomY=0,u.m_randomZ=0,u.m_id=e,u.m_universe=n,u.m_x=i,u.m_y=r,u.m_z=l,u.m_randomX=Math.random(),u.m_randomY=Math.random(),u.m_randomZ=Math.random(),u}return r(t,e),l(t,[{key:"getInfo",value:function(){return this.m_id+" ("+this.m_x+", "+this.m_y+", "+this.m_z+")"}},{key:"isNoController",value:function(){return null===this.m_civilization}},{key:"changeOwn",value:function(e){this.m_civilization=e}}]),t}(f.default);t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i,a){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,s,c,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(14),m=i(h),p=n(30),v=n(19),_=i(v),y=n(2),b=i(y),g=n(4),E=i(g),w=n(20),C=i(w),x=n(15),O=i(x),k=n(33),P=(i(k),n(53)),T=i(P),R=n(54),I=i(R),M=(l=function(){function e(){o(this,e),a(this,"m_width",u,this),a(this,"m_countOfGalaxies",s,this),a(this,"m_countOfCivilizations",c,this),this.m_currentCountOfCivilizations=0,this.m_explodeAddMin=0,this.m_explodeAddMax=0,this.m_maxTechFromTouch=0,this.m_lifeLostPerRound=0,this.m_maxOptCount=0,this.m_techInitMin=0,this.m_techInitMax=0,this.m_techExplodeRate=0,this.m_techAddSpeed=0,this.m_civilizations=null,this.m_galaxies=null,this.m_currentTime=0,this.m_currentShuffeldCivilizations=null,this.m_universeLife=0,a(this,"m_round",f,this),this.m_universeLifeForDisplay=0,this.m_totalLifeForDisplay=0,this.m_lifePerGalaxy=10,this.m_needRefreshUniverseView=!0,this.m_universeView=null,this.m_tableView=null}return d(e,[{key:"initAfterLoadConfig",value:function(){this.m_galaxies=[];for(var e=0;e<this.m_countOfGalaxies;e++){var t=0,n=0,i=0;t=b.default.rangeFloat(0,this.m_width),n=b.default.rangeFloat(0,this.m_width),i=b.default.rangeFloat(0,this.m_width);var a=new I.default(e,this,t,n,i);this.m_galaxies.push(a)}this.m_civilizations=[];var o=this.getShuffledGalaxies();b.default.log("arrOfGalaxies",o.length);for(var r=0;r<this.m_countOfCivilizations;r++){var l=null,u=o.length-r;u<=0&&b.default.logError("文明数量与星系数量不匹配: "+u+"-"+o.length+"-"+r);var s=b.default.range(0,u);l=o[s],o[s]=o[u-1],l.isNoController()||b.default.logError("文明数量与星系数量: 随机算法有问题啊。。。");var c=new T.default(r,this,l);this.m_civilizations.push(c)}this.scheduleShuffleGalaxies()}},{key:"loadConfig",value:function(){return this.m_round=0,this.m_width=100,this.m_countOfGalaxies=parseFloat(O.default.get("galaxyCount")),this.m_currentCountOfCivilizations=this.m_countOfCivilizations=parseFloat(O.default.get("civiCount")),this.m_techInitMin=parseFloat(O.default.get("techMin")),this.m_techInitMax=parseFloat(O.default.get("techMax")),this.m_explodeAddMin=parseFloat(O.default.get("explodeAddMin")),this.m_explodeAddMax=parseFloat(O.default.get("explodeAddMax")),this.m_maxTechFromTouch=parseFloat(O.default.get("maxTechFromTouch")),this.m_techExplodeRate=parseFloat(O.default.get("techExplodeRate")),this.m_techAddSpeed=parseFloat(O.default.get("techAddSpeed")),this.m_lifeLostPerRound=parseFloat(O.default.get("lifeLostPerRound")),this.m_maxOptCount=parseFloat(O.default.get("maxOptCount")),this.m_currentCountOfCivilizations>this.m_countOfGalaxies?(b.default.logError("文明数不能小于星系数！"),!1):(this.initAfterLoadConfig(),C.default.getInstance().addSchedule(this.scheduleRefreshView,this,1),C.default.getInstance().addSchedule(this.scheduleShuffleGalaxies,this,1),C.default.getInstance().addSchedule(this.scheduleRound,this,.05),this.setDirty(),!0)}},{key:"clear",value:function(){C.default.getInstance().removeSchedule(this.scheduleRefreshView,this),C.default.getInstance().removeSchedule(this.scheduleShuffleGalaxies,this),C.default.getInstance().removeSchedule(this.scheduleRound,this)}},{key:"setDirty",value:function(){this.m_needRefreshUniverseView=!0}},{key:"scheduleRefreshView",value:function(){0!=E.default.renderEnable&&this.m_needRefreshUniverseView&&(this.m_needRefreshUniverseView=!1,null!=this.m_tableView&&this.m_tableView.forceUpdate(),null!=this.m_universeView&&this.m_universeView.refreshView())}},{key:"scheduleShuffleGalaxies",value:function(){E.default.getInstance().m_isStart&&(this.m_currentShuffeldCivilizations=this.getShuffledGalaxies())}},{key:"scheduleRound",value:function(){if(E.default.getInstance().m_isStart&&(this.m_currentShuffeldCivilizations=this.getShuffledGalaxies()),!(this.m_civilizations.length<=1)){_.default.log(1,"第"+this.m_round+"回合");var e=this.m_universeLife/this.m_countOfGalaxies;this.m_universeLifeForDisplay=this.m_universeLife.toFixed(2),this.m_totalLifeForDisplay=this.m_universeLife;for(var t=0;t<this.m_civilizations.length;t++)this.m_totalLifeForDisplay+=this.m_civilizations[t].m_life;this.m_totalLifeForDisplay=this.m_totalLifeForDisplay.toFixed(2),this.m_universeLife=0,this.m_round++;for(var n=null,i=0,a=0;a<this.m_civilizations.length;a++)n=this.m_civilizations[a],n.m_isDead||(i=e*n.m_controlGalaxies.length,n.m_life+=i);for(var o=0;o<this.m_civilizations.length;o++)n=this.m_civilizations[o],n.m_isDead||n.doRound();this._removeDeadCivlizations()}}},{key:"update",value:function(e){}},{key:"_removeDeadCivlizations",value:function(){var e=this;m.default.remove(this.m_civilizations,function(t){return!!t.m_isDead&&(t.onDestory(),e.setDirty(),!0)}),this.m_currentCountOfCivilizations=this.m_civilizations.length}},{key:"getShuffledGalaxies",value:function(){var e=m.default.slice(this.m_galaxies);return b.default.shuffle(e),e}},{key:"getNoControlledGalaxyCount",value:function(){for(var e=0,t=0;t<this.m_galaxies.length;t++)this.m_galaxies[t].isNoController()&&e++;return e}},{key:"getControlledGalaxyCount",value:function(){for(var e=0,t=null,n=0;n<this.m_civilizations.length;n++)t=this.m_civilizations[n],e+=t.m_controlGalaxies.length;return e}},{key:"getAliveCount",value:function(){for(var e=0,t=null,n=0;n<this.m_civilizations.length;n++)t=this.m_civilizations[n],t.m_isDead||e++;return e}},{key:"getCiviInfos",value:function(){return null!=this.m_civilizations?this.m_civilizations.map(function(e,t){return{key:t,ID:e.m_id,initTech:e.m_initTech,tech:e.m_tech.toFixed(2),techExplodeCount:e.m_techExplodeCount,galaxyCount:e.m_controlGalaxies.length,life:e.m_life.toFixed(2),friendliness:e.m_friendliness.toFixed(2),pos:"("+e.m_x.toFixed(2)+", "+e.m_y.toFixed(2)+", "+e.m_z.toFixed(2)+")",techAddByNormal:e.m_techAddByNormal.toFixed(2),techAddByExplode:e.m_techAddByExplode.toFixed(2),techAddByTouch:e.m_techAddByTouch.toFixed(2)}}):[]}},{key:"changeTotalLife",value:function(e){this.m_universeLife+=e}}]),e}(),u=r(l.prototype,"m_width",[p.observable],{enumerable:!0,initializer:function(){return 0}}),s=r(l.prototype,"m_countOfGalaxies",[p.observable],{enumerable:!0,initializer:function(){return 0}}),c=r(l.prototype,"m_countOfCivilizations",[p.observable],{enumerable:!0,initializer:function(){return 0}}),f=r(l.prototype,"m_round",[p.observable],{enumerable:!0,initializer:function(){return 0}}),l);t.default=M},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=n(38),f=i(c),d=n(2),h=i(d),m=n(4),p=(i(m),n(63)),v=i(p),_=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.m_UniverseView=null,n.m_UniverseView=new v.default,n.startInterver(),n}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.m_UniverseView.init(this.m_canvas)}},{key:"startInterver",value:function(){var e=this;this.m_interver=setInterval(function(){e.m_UniverseView.animate()},1e3/60)}},{key:"stopInterver",value:function(){this.m_interver&&clearInterval(this.m_interver),this.m_interver=null}},{key:"render",value:function(){var e=this;return h.default.log("render in CanvasView view"),f.default.canvas({ref:function(t){e.m_canvas=t},width:h.default.CanvasWidth,height:h.default.CanvasHeight,style:{width:h.default.CanvasWidth+"px",height:h.default.CanvasHeight+"px",position:"absolute",left:0,top:0}})}}]),t}(s.default.PureComponent);t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),c=i(s),f=n(12),d=n(8),h=n(2),m=i(h),p=n(4),v=i(p),_=n(58),y=i(_),b=(0,f.observer)(l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderCount=0,n}return r(t,e),u(t,[{key:"handleChange",value:function(){}},{key:"componentWillUnmount",value:function(){this.stopInterver()}},{key:"render",value:function(){return this.renderCount++,v.default.getInstance().m_universe,c.default.createElement("div",null,c.default.createElement("p",{hidden:!m.default.isDebug()},"renderCount ",this.renderCount),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"24"},c.default.createElement(y.default,null))))}}]),t}(c.default.Component))||l;t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=n(8),f=n(4),d=i(f),h=n(2),m=i(h),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={sortedInfo:null,modalVisible:!1},n.renderCount=0,n.m_selectCivi=null,n.onBtnReload=n.onBtnReload.bind(n),n.handleChange=n.handleChange.bind(n),n.onRowClick=n.onRowClick.bind(n),n.handleModalOk=n.handleModalOk.bind(n),n.handleModalCancel=n.handleModalCancel.bind(n);var i=d.default.getInstance().m_universe;return i.m_tableView=n,n}return r(t,e),l(t,[{key:"handleModalOk",value:function(){this.setState({modalVisible:!1})}},{key:"handleModalCancel",value:function(){this.setState({modalVisible:!1})}},{key:"onBtnReload",value:function(){this.clearAll()}},{key:"handleChange",value:function(e,t,n){this.setState({sortedInfo:n})}},{key:"onRowClick",value:function(e,t){this.m_selectCivi=e,this.setState({modalVisible:!0})}},{key:"clearAll",value:function(){this.setState({sortedInfo:null})}},{key:"render",value:function(){this.renderCount++;var e=d.default.getInstance().m_universe,t=this.state.sortedInfo;t=t||{};var n=[{title:"ID",dataIndex:"ID",key:"ID"},{title:"初始坐标",dataIndex:"pos",key:"pos"},{title:"初始科技",dataIndex:"initTech",key:"initTech",sorter:function(e,t){return e.initTech-t.initTech},sortOrder:"initTech"===t.columnKey&&t.order},{title:"当前科技",dataIndex:"tech",key:"tech",sorter:function(e,t){return e.tech-t.tech},sortOrder:"tech"===t.columnKey&&t.order},{title:"技术爆炸次数",dataIndex:"techExplodeCount",key:"techExplodeCount",sorter:function(e,t){return e.techExplodeCount-t.techExplodeCount},sortOrder:"techExplodeCount"===t.columnKey&&t.order},{title:"拥有星系",dataIndex:"galaxyCount",key:"galaxyCount",sorter:function(e,t){return e.galaxyCount-t.galaxyCount},sortOrder:"galaxyCount"===t.columnKey&&t.order},{title:"生命值",dataIndex:"life",key:"life",sorter:function(e,t){return e.life-t.life},sortOrder:"life"===t.columnKey&&t.order},{title:"友善度",dataIndex:"friendliness",key:"friendliness",sorter:function(e,t){return e.friendliness-t.friendliness},sortOrder:"friendliness"===t.columnKey&&t.order}];return s.default.createElement("div",null,null!=this.m_selectCivi?this.renderModal():null,s.default.createElement(c.Button,{onClick:this.onBtnReload},"刷新列表"),s.default.createElement(c.Table,{size:"small",columns:n,dataSource:e.getCiviInfos(),onChange:this.handleChange,onRowClick:this.onRowClick}),s.default.createElement("p",{hidden:!m.default.isDebug()},"table renderCount ",this.renderCount))}},{key:"renderModal",value:function(){return s.default.createElement(c.Modal,{title:"文明详细信息",visible:this.state.modalVisible,onOk:this.handleModalOk,onCancel:this.handleModalCancel,okText:"OK",cancelText:"Cancel",maskClosable:"true"},s.default.createElement("div",null,s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"文明ID"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.ID)),s.default.createElement("br",null),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"当前科技"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.tech)),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"科技的自然增长总数"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.techAddByNormal)),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"从技术爆炸中获得的科技增长数"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.techAddByExplode)),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"通过交流接触获得的科技增长数"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.techAddByTouch)),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"目前拥有的星系数"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.galaxyCount)),s.default.createElement("br",null),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"生命值"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.life)),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"10",offset:"2"},"友善度"),s.default.createElement(c.Col,{span:"8"},this.m_selectCivi.friendliness))))}}]),t}(s.default.Component);t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),c=i(s),f=n(12),d=n(8),h=n(2),m=i(h),p=n(4),v=i(p),_=n(15),y=i(_),b=n(61),g=i(b),E=(0,f.observer)(l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderCount=0,n.state={modalVisible:!1},n.onBtnStart=n.onBtnStart.bind(n),n.onBtnRestConfig=n.onBtnRestConfig.bind(n),n.onBtnRenderModal=n.onBtnRenderModal.bind(n),n.handleModalOk=n.handleModalOk.bind(n),n.handleModalCancel=n.handleModalCancel.bind(n),v.default.getInstance().checkConfigIsInited(),n}return r(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.stopInterver()}},{key:"onBtnStart",value:function(){v.default.getInstance().start()}},{key:"onBtnRestConfig",value:function(){v.default.getInstance().resetConfig(),this.forceUpdate()}},{key:"onBtnRenderModal",value:function(){this.setState({modalVisible:!0})}},{key:"handleModalOk",value:function(){this.setState({modalVisible:!1})}},{key:"handleModalCancel",value:function(){this.setState({modalVisible:!1})}},{key:"renderModal",value:function(){return c.default.createElement(d.Modal,{title:"版本更新记录",visible:this.state.modalVisible,onOk:this.handleModalOk,onCancel:this.handleModalCancel,okText:"OK",cancelText:"Cancel",maskClosable:"true"},c.default.createElement(g.default,null))}},{key:"render",value:function(){var e=this;return this.renderCount++,v.default.getInstance().m_universe,c.default.createElement("div",null,1==this.state.modalVisible?this.renderModal():null,c.default.createElement(d.Row,{style:{marginTop:"5px"}},c.default.createElement(d.Col,{span:"8"},c.default.createElement(d.Button,{onClick:this.onBtnStart},"开始模拟")),c.default.createElement(d.Col,{span:"8"},c.default.createElement(d.Button,{onClick:this.onBtnRestConfig},"重置参数")),c.default.createElement(d.Col,{span:"8"},c.default.createElement(d.Button,{onClick:this.onBtnRenderModal,type:"dashed"},"更新记录"))),c.default.createElement(d.Row,{style:{marginTop:"8px"}},c.default.createElement(d.Col,{span:"10"},"星系数"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("galaxyCount"),onChange:function(t){y.default.set("galaxyCount",t.target.value),e.forceUpdate()}}))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"文明数"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("civiCount"),onChange:function(t){y.default.set("civiCount",t.target.value),e.forceUpdate()}}))),c.default.createElement("hr",null),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"文明初始科技随机范围"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("techMin"),onChange:function(t){y.default.set("techMin",t.target.value),e.forceUpdate()}})),c.default.createElement(d.Col,{span:"2"},"~"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("techMax"),onChange:function(t){y.default.set("techMax",t.target.value),e.forceUpdate()}}))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"每回合科技基础增加值"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("techAddSpeed"),onChange:function(t){y.default.set("techAddSpeed",t.target.value),e.forceUpdate()}}))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"技术爆炸概率"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("techExplodeRate"),onChange:function(t){y.default.set("techExplodeRate",t.target.value),e.forceUpdate()}}))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"技术爆炸获得科技点范围"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("explodeAddMin"),onChange:function(t){y.default.set("explodeAddMin",t.target.value),e.forceUpdate()}})),c.default.createElement(d.Col,{span:"2"},"~"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("explodeAddMax"),onChange:function(t){y.default.set("explodeAddMax",t.target.value),e.forceUpdate()}}))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"单次交流可获得的科技点限制"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("maxTechFromTouch"),onChange:function(t){y.default.set("maxTechFromTouch",t.target.value),e.forceUpdate()}}))),c.default.createElement("p",{hidden:!m.default.isDebug()},"renderCount ",this.renderCount),c.default.createElement("hr",null),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"每回合单个星系生命消耗"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("lifeLostPerRound"),onChange:function(t){y.default.set("lifeLostPerRound",t.target.value),e.forceUpdate()}}))),c.default.createElement("hr",null),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"每回合文明行动次数上限"),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Input,{value:y.default.get("maxOptCount"),onChange:function(t){y.default.set("maxOptCount",t.target.value),e.forceUpdate()}}))))}}]),t}(c.default.Component))||l;t.default=E},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=n(8),f=n(2),d=i(f),h=n(4),m=i(h),p=n(34),v=i(p),_=n(56),y=i(_),b=n(59),g=i(b),E=n(57),w=i(E),C=n(62),x=i(C),O=n(64),k=i(O),P=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1},n.renderCount=0,d.default.log("GameView constructor"),d.default.log("init role.."),m.default.getInstance(),n.onBtnHaHaHa=n.onBtnHaHaHa.bind(n),n.handleModalOk=n.handleModalOk.bind(n),n.handleModalCancel=n.handleModalCancel.bind(n),n.startInterver=n.startInterver.bind(n),n.stopInterver=n.stopInterver.bind(n),n.startInterver(),n}return r(t,e),l(t,[{key:"onBtnHaHaHa",value:function(){this.setState({modalVisible:!0})}},{key:"handleModalOk",value:function(){this.setState({modalVisible:!1})}},{key:"handleModalCancel",value:function(){this.setState({modalVisible:!1})}},{key:"renderModalHaHaHa",value:function(){return s.default.createElement(c.Modal,{title:"欢迎任何形势的贡献",visible:this.state.modalVisible,onOk:this.handleModalOk,onCancel:this.handleModalCancel,okText:"OK",cancelText:"Cancel",maskClosable:"true"},s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:24},s.default.createElement("b",null,"包括但不限于：找BUG、提建议、打赏"))),s.default.createElement("br",null),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:12},s.default.createElement("b",null,"邮箱")),s.default.createElement(c.Col,{span:12},"xtutu0202@gmail.com")),s.default.createElement("br",null),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:12},s.default.createElement("b",null,"知乎")),s.default.createElement(c.Col,{span:12},s.default.createElement("a",{href:"https://www.zhihu.com/people/xtutu/activities",target:"_blank"},"xtutu"),s.default.createElement("br",null))),s.default.createElement("br",null),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:12},s.default.createElement("b",null,"支付宝")),s.default.createElement(c.Col,{span:12},s.default.createElement("b",null,"微信"))),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:12},s.default.createElement("img",{height:"200",width:"200",src:v.default.getImg("zfb")})),s.default.createElement(c.Col,{span:12},s.default.createElement("img",{height:"200",width:"200",src:v.default.getImg("wx")}))))}},{key:"render",value:function(){return d.default.log("render in game view"),s.default.createElement("div",null,this.state.modalVisible?this.renderModalHaHaHa():null,s.default.createElement(c.Row,{type:"flex",justify:"start",align:"top"},s.default.createElement(c.Col,{xs:16,sm:16,md:16,lg:12},s.default.createElement("div",{style:{width:d.default.CanvasWidth+"px",height:d.default.CanvasHeight+"px"}},s.default.createElement(y.default,null))),s.default.createElement(c.Col,{span:8},s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"24"},s.default.createElement(g.default,null)),s.default.createElement(k.default,null),s.default.createElement(c.Col,{span:"24"},s.default.createElement(x.default,null))),s.default.createElement("br",null),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:"24"},s.default.createElement(c.Button,{type:"primary",size:"large",onClick:this.onBtnHaHaHa},"我要贡献一份力量!"))))),s.default.createElement(c.Row,null,s.default.createElement(c.Col,{span:24},s.default.createElement(w.default,null))))}},{key:"componentWillUnmount",value:function(){this.stopInterver()}},{key:"componentDidMount",value:function(){}},{key:"startInterver",value:function(){this.m_interver=setInterval(function(){},1e3)}},{key:"stopInterver",value:function(){this.m_interver&&clearInterval(this.m_interver),this.m_interver=null}}]),t}(s.default.PureComponent);t.default=P},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=n(8),f=n(2),d=(i(f),n(4)),h=(i(d),function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(c.Timeline,null,s.default.createElement(c.Timeline.Item,null,"第一个版本发布 2017-02-13"),s.default.createElement(c.Timeline.Item,null,s.default.createElement("b",null,"最近一次更新时间 2017-02-16")," ")),s.default.createElement(c.Row,{style:{margin:"10px"}},s.default.createElement(c.Col,{offset:"18",span:"6"},s.default.createElement("a",{href:"https://www.zhihu.com/question/21296837/answer/146050873",target:"_blank"},s.default.createElement(c.Button,{type:"primary"},"查看使用介绍")))))}}]),t}(s.default.PureComponent));t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),c=i(s),f=n(12),d=n(8),h=n(2),m=i(h),p=n(4),v=i(p),_=n(20),y=i(_),b=n(19),g=i(b),E=(0,f.observer)(l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderCount=0,n}return r(t,e),u(t,[{key:"handleChange",value:function(){}},{key:"componentWillUnmount",value:function(){this.stopInterver()}},{key:"render",value:function(){var e=this;this.renderCount++;var t=v.default.getInstance().m_universe;return c.default.createElement("div",{style:{marginTop:"10px"}},c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"当前回合数:"),c.default.createElement(d.Col,{span:"4"},t.m_round)),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"存活的文明总数:"),c.default.createElement(d.Col,{span:"4"},t.m_currentCountOfCivilizations)),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},"时间流速"),c.default.createElement(d.Col,{span:"6"},c.default.createElement(d.Slider,{min:0,max:5,step:.01,onChange:function(t){y.default.getInstance().m_timeScale=parseFloat(t),e.forceUpdate()},value:y.default.getInstance().m_timeScale})),c.default.createElement(d.Col,{span:"4"},"*",y.default.getInstance().m_timeScale)),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},c.default.createElement("p",null,"日志是否开启")),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Switch,{checked:g.default.enable,onChange:function(t){g.default.enable=t,e.forceUpdate()}})),c.default.createElement(d.Col,{span:"10"},"（关闭状态，性能较好）")),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"10"},c.default.createElement("p",null,"是否进行图形渲染",c.default.createElement("br",null))),c.default.createElement(d.Col,{span:"4"},c.default.createElement(d.Switch,{checked:v.default.renderEnable,onChange:function(t){v.default.renderEnable=t,e.forceUpdate()}})),c.default.createElement(d.Col,{span:"10"},"（关闭状态，性能较好）")),m.default.isDebug()?c.default.createElement("p",null,"renderCount ",this.renderCount):null,m.default.isDebug()?c.default.createElement("p",null,"lifeInUniverse: ",t.m_universeLifeForDisplay):null,m.default.isDebug()?c.default.createElement("p",null,"totalLife: ",t.m_totalLifeForDisplay):null)}}]),t}(c.default.Component))||l;t.default=E},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(14),u=(a(l),n(29)),s=i(u),c=n(2),f=a(c),d=n(4),h=a(d),m=n(33),p=(a(m),n(51)),v=(a(p),n(52)),_=(a(v),{red:15881030,white:14209233,pink:16095342,brown:5845806,brownDark:2300175,blue:6865856}),y=function(){function e(){o(this,e),this.m_helper=null,this.m_meshCivilization=null,this.m_meshCivilizationLine=null,this.m_meshGalaxy=null}return r(e,[{key:"init",value:function(e){var t=h.default.getInstance().m_universe;t.m_universeView=this,this.container=document.getElementById("container"),this.m_camera=new s.PerspectiveCamera(27,f.default.CanvasWidth/f.default.CanvasHeight,1,1e3),this.m_camera.position.z=260,this.m_scene=new s.Scene,this.createLight(),this.m_renderer=new s.WebGLRenderer({canvas:e,antialias:!1}),this.m_renderer.setPixelRatio(window.devicePixelRatio),this.m_renderer.setSize(f.default.CanvasWidth,f.default.CanvasHeight),this.m_renderer.gammaInput=!0,this.m_renderer.gammaOutput=!0,this.m_controls=new s.OrbitControls(this.m_camera,this.m_renderer.domElement)}},{key:"createLight",value:function(){this.m_scene.add(new s.AmbientLight(16777215,2));var e=new s.DirectionalLight(16777215,.5);e.position.set(1,1,1),this.m_scene.add(e);var t=new s.DirectionalLight(16777215,1.5);t.position.set(0,-1,0),this.m_scene.add(t)}},{key:"refreshHelp",value:function(){var e=h.default.getInstance().m_universe,t=e.m_width,n=new s.BoxHelper(new s.Mesh(new s.BoxGeometry(t,t,t)));n.material.color.setHex(526344),n.material.blending=s.AdditiveBlending,n.material.transparent=!0,null!=this.m_helper&&(this.m_scene.remove(this.m_helper),this.m_helper=null),this.m_helper=n,this.m_scene.add(this.m_helper)}},{key:"createItemCivilization",value:function(e,t,n,i){var a=h.default.getInstance().m_universe,o=a.m_width,r={positions:[],colors:[]},l=1.5,u=l/2,c=new s.Color,f=t,d=n,m=i,p=t+e.m_randomX*l-u,v=n+e.m_randomY*l-u,_=i+e.m_randomZ*l-u,y=t+e.m_randomZ*l-u,b=n+e.m_randomY*l-u,g=i+e.m_randomX*l-u,E=0;r.positions[E]=f,r.positions[E+1]=d,r.positions[E+2]=m,r.positions[E+3]=p,r.positions[E+4]=v,r.positions[E+5]=_,r.positions[E+6]=y,r.positions[E+7]=b,r.positions[E+8]=g;var w=t/o+.5,C=n/o+.5,x=i/o+.5;return c.setRGB(w,C,x),r.colors[E]=c.r,r.colors[E+1]=c.g,r.colors[E+2]=c.b,r.colors[E+3]=c.r,r.colors[E+4]=c.g,r.colors[E+5]=c.b,r.colors[E+6]=c.r,r.colors[E+7]=c.g,r.colors[E+8]=c.b,r}},{key:"refreshCivilization",value:function(){function e(){this.array=null}for(var t=h.default.getInstance().m_universe,n=t.m_civilizations,i=t.getControlledGalaxyCount(),a=i,o=new s.BufferGeometry,r=new Float32Array(3*a*3),l=new Float32Array(3*a*3),u=new Float32Array(3*a*3),c=t.m_width,f=c/2,d=null,m=null,p=0,v=0,_=0,y=void 0,b=0,g=0,E=0;E<n.length;E++){d=n[E];for(var w=0;w<d.m_controlGalaxies.length;w++){m=d.m_controlGalaxies[w],p=m.m_x-f,v=m.m_y-f,_=m.m_z-f,y=this.createItemCivilization(m,p,v,_);for(var C=0;C<9;C++)r[b++]=y.positions[C],u[g++]=y.colors[C]}}o.addAttribute("position",new s.BufferAttribute(r,3).onUpload(e)),o.addAttribute("normal",new s.BufferAttribute(l,3).onUpload(e)),o.addAttribute("color",new s.BufferAttribute(u,3).onUpload(e)),o.computeBoundingSphere();var x=new s.MeshPhongMaterial({color:16777215,side:s.DoubleSide,vertexColors:s.VertexColors});null!=this.m_meshCivilization&&(this.m_scene.remove(this.m_meshCivilization),this.m_meshCivilization=null),this.m_meshCivilization=new s.Mesh(o,x),this.m_scene.add(this.m_meshCivilization)}},{key:"createItemGalaxy",value:function(e,t,n,i){var a=h.default.getInstance().m_universe,o=a.m_width,r={positions:[],colors:[]},l=.6,u=l/2,c=new s.Color,f=-u,d=u,m=0,p=u,v=u,_=0,y=-u,b=-u,g=0,E=u,w=-u,C=0,x=new s.Euler(e.m_randomX*Math.PI,e.m_randomY*Math.PI,0),O=new s.Vector3(f,d,m);O.applyEuler(x),f=O.x+t,d=O.y+n,m=O.z+i;var k=new s.Vector3(p,v,_);k.applyEuler(x),p=k.x+t,v=k.y+n,_=k.z+i;var P=new s.Vector3(y,b,g);P.applyEuler(x),y=P.x+t,b=P.y+n,g=P.z+i;var T=new s.Vector3(E,w,C);T.applyEuler(x),E=T.x+t,w=T.y+n,C=T.z+i;var R=0;r.positions[R++]=f,r.positions[R++]=d,r.positions[R++]=m,r.positions[R++]=p,r.positions[R++]=v,r.positions[R++]=_,r.positions[R++]=y,r.positions[R++]=b,r.positions[R++]=g,r.positions[R++]=p,r.positions[R++]=v,r.positions[R++]=_,r.positions[R++]=y,r.positions[R++]=b,r.positions[R++]=g,r.positions[R++]=E,r.positions[R++]=w,r.positions[R++]=C;var I=t/o+.5,M=n/o+.5,j=i/o+.5;return I=e.m_randomX,M=e.m_randomY,j=e.m_randomZ,c.setRGB(I,M,j),R=0,r.colors[R++]=c.r,r.colors[R++]=c.g,r.colors[R++]=c.b,r.colors[R++]=c.r,r.colors[R++]=c.g,r.colors[R++]=c.b,r.colors[R++]=c.r,r.colors[R++]=c.g,r.colors[R++]=c.b,r.colors[R++]=c.r,r.colors[R++]=c.g,r.colors[R++]=c.b,r.colors[R++]=c.r,r.colors[R++]=c.g,r.colors[R++]=c.b,r.colors[R++]=c.r,r.colors[R++]=c.g,r.colors[R++]=c.b,r}},{key:"refreshGalaxy",value:function(){function e(){this.array=null}for(var t=h.default.getInstance().m_universe,n=t.m_galaxies,i=t.getNoControlledGalaxyCount(),a=2*i,o=new s.BufferGeometry,r=new Float32Array(3*a*3),l=new Float32Array(3*a*3),u=t.m_width,c=u/2,f=(new s.Color,0),d=0,m=0;m<n.length;m++){var p=n[m];if(p.isNoController())for(var v=p.m_x-c,y=p.m_y-c,b=p.m_z-c,g=this.createItemGalaxy(p,v,y,b),E=0;E<18;E++)r[f++]=g.positions[E],l[d++]=g.colors[E]}o.addAttribute("position",new s.BufferAttribute(r,3).onUpload(e)),o.addAttribute("color",new s.BufferAttribute(l,3).onUpload(e)),o.computeBoundingSphere();var w=new s.MeshPhongMaterial({color:_.blue,specular:16777215,shininess:250,side:s.DoubleSide,vertexColors:s.VertexColors});null!=this.m_meshGalaxy&&(this.m_scene.remove(this.m_meshGalaxy),this.m_meshGalaxy=null),this.m_meshGalaxy=new s.Mesh(o,w),this.m_scene.add(this.m_meshGalaxy)}},{key:"getLineCount",value:function(){for(var e=0,t=h.default.getInstance().m_universe,n=t.m_civilizations,i=null,a=0;a<n.length;a++)i=n[a],e+=i.m_controlGalaxies.length;return e}},{key:"refreshCivilizationLine",value:function(){for(var e=h.default.getInstance().m_universe,t=e.m_civilizations,n=this.getLineCount(),i=n,a=new s.BufferGeometry,o=new Float32Array(3*i*2),r=new Float32Array(4*i*2),l=e.m_width,u=l/2,c=null,f=null,d=null,m=0,p=0,v=.1,_=0;_<t.length;_++)if(c=t[_],!(c.m_controlGalaxies.length<=1)){f=c.m_birthGalaxy;for(var y=1;y<c.m_controlGalaxies.length;y++)d=c.m_controlGalaxies[y],o[m++]=f.m_x-u,o[m++]=f.m_y-u,o[m++]=f.m_z-u,o[m++]=d.m_x-u,o[m++]=d.m_y-u,o[m++]=d.m_z-u,r[p++]=v,r[p++]=v,r[p++]=v,r[p++]=v,r[p++]=v,r[p++]=v,r[p++]=v,r[p++]=v}a.addAttribute("position",new s.BufferAttribute(o,3).setDynamic(!0)),a.addAttribute("color",new s.BufferAttribute(r,4).setDynamic(!0)),a.computeBoundingSphere();var b=new s.LineBasicMaterial({vertexColors:s.VertexColors,blending:s.MinEquation,transparent:!0});null!=this.m_meshCivilizationLine&&(this.m_scene.remove(this.m_meshCivilizationLine),this.m_meshCivilizationLine=null),this.m_meshCivilizationLine=new s.LineSegments(a,b),this.m_scene.add(this.m_meshCivilizationLine)}},{key:"initUnitversView",value:function(){this.refreshHelp(),this.refreshView()}},{key:"refreshView",value:function(){h.default.getInstance().m_isStart&&0!=h.default.renderEnable&&(this.refreshCivilization(),this.refreshGalaxy(),this.refreshCivilizationLine())}},{key:"animate",value:function(){this.render()}},{key:"render",value:function(){this.m_renderer.render(this.m_scene,this.m_camera)}}]),e}();t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),s=i(u),c=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return s.default.createElement("hr",{style:{height:"1px",margin:"3px"}})}}]),t}(s.default.PureComponent);t.default=c},,function(e,t,n){t=e.exports=n(67)(),t.push([e.id,".normal{font-family:Georgia,sans-serif;margin:5px;padding:10px;text-align:center;font-size:20px;color:red;background:'#0cc'}.normal h3{margin-bottom:10px;color:#483d8b}.title{font-size:2.5rem;font-weight:400;letter-spacing:-1px}.welcome{height:328px;background-size:388px 328px}.list{font-size:1.2em;margin-top:1.8em;list-style:none;line-height:1.5em}.list code{background:#030}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<t.length;a++){var r=t[a];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=h[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(s(i.parts[o],t))}else{for(var r=[],o=0;o<i.parts.length;o++)r.push(s(i.parts[o],t));h[i.id]={id:i.id,refs:1,parts:r}}}}function a(e){for(var t=[],n={},i=0;i<e.length;i++){var a=e[i],o=a[0],r=a[1],l=a[2],u=a[3],s={css:r,media:l,sourceMap:u};n[o]?n[o].parts.push(s):t.push(n[o]={id:o,parts:[s]})}return t}function o(e,t){var n=v(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function r(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function l(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function s(e,t){var n,i,a;if(t.singleton){var o=y++;n=_||(_=l(t)),i=c.bind(null,n,o,!1),a=c.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),i=d.bind(null,n),a=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),i=f.bind(null,n),a=function(){r(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}function c(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,a);else{var o=document.createTextNode(a),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function f(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var h={},m=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=m(function(){return document.head||document.getElementsByTagName("head")[0]}),_=null,y=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=a(e);return i(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var l=n[r],u=h[l.id];u.refs--,o.push(u)}if(e){var s=a(e);i(s,t)}for(var r=0;r<o.length;r++){var u=o[r];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var i=n(66);"string"==typeof i&&(i=[[e.id,i,""]]),n(95)(i,{}),i.locals&&(e.exports=i.locals)},function(e,t,n){e.exports=n.p+"e829bdabe819ea2f64ab3e3619d6b576.jpg"},function(e,t,n){e.exports=n.p+"a1f24d2b31d8d92bf832fd44a92c0dae.jpg"},function(e,t,n){e.exports=n.p+"1ae2fa781a4b58d8fc4f48c41c8fe16a.jpg"},function(e,t,n){e.exports=n.p+"c61a0cb15fe6e2dddf3456a0905f02ad.jpg"},function(e,t,n){e.exports=n.p+"7670e383dff7d041ae8eb3e33349a0b7.jpg"}]);