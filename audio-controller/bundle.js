!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=21)}([function(e,t,r){"use strict";!function(e){var t=function(){function e(){}return e.getName=function(){return"background"},e.getPNG=function(){return r(5)},e}();e.ImagesBackground=t;var n=function(){function e(){}return e.getName=function(){return"bird"},e.getPNG=function(){return r(6)},e}();e.ImagesBird=n;var i=function(){function e(){}return e.getName=function(){return"ground"},e.getPNG=function(){return r(7)},e}();e.ImagesGround=i;var a=function(){function e(){}return e.getName=function(){return"pipe"},e.getPNG=function(){return r(8)},e}();e.ImagesPipe=a}(t.Images||(t.Images={}));!function(e){var t;!function(e){e[e.PreloadBar="preload_bar.png"]="PreloadBar",e[e.PreloadFrame="preload_frame.png"]="PreloadFrame"}(t||(t={}));var n=function(){function e(){}return e.getName=function(){return"preload_sprites_array"},e.getJSONArray=function(){return r(3)},e.getPNG=function(){return r(4)},e}();n.Frames=t,e.AtlasesPreloadSpritesArray=n}(t.Atlases||(t.Atlases={}));!function(e){!function(){function e(){}return e}()}(t.Audio||(t.Audio={}));!function(e){!function(){function e(){}return e}()}(t.Audiosprites||(t.Audiosprites={}));!function(e){e.Barrio="Barrio"}(t.GoogleWebFonts||(t.GoogleWebFonts={}));!function(e){!function(){function e(){}return e}()}(t.CustomWebFonts||(t.CustomWebFonts={}));!function(e){!function(){function e(){}return e}()}(t.BitmapFonts||(t.BitmapFonts={}));!function(e){!function(){function e(){}return e}()}(t.JSON||(t.JSON={}));!function(e){!function(){function e(){}return e}()}(t.XML||(t.XML={}));!function(e){!function(){function e(){}return e}()}(t.Text||(t.Text={}));!function(e){!function(){function e(){}return e}()}(t.Misc||(t.Misc={}))},function(e,t,r){"use strict";var n=function(){function e(){}return e.MakeStateSingleton=function(e){e.getInstance=function(){var t=null;return function(){return null==t&&(t=new e),t}}()},e.isDebug=function(){return!1},e.logError=function(e){alert(e)},e.log=function(){console.log.apply(console,arguments)},e.debug=function(){console.log.apply(console,arguments)},e.range=function(e,t){if(e==t-1)return e;if(e==t)return t;if(e>t){var r=t;t=e,e=r}return e+Math.floor(Math.random()*(t-e))},e.rangeFloat=function(e,t){if(e>t){var r=t;t=e,e=r}return e+Math.random()*(t-e)},e.clamp=function(e,t,r){return e<t?t:e>r?r:e},e.shuffle=function(t){for(var r,n,i=t.length;i>0;)r=e.range(0,i),n=t[r],t[r]=t[i-1],t[i-1]=n,i--},e.flyText=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n="",i=0;for(var a in t)0!=i&&(n+=" "),i++,n+=t[a];var s=e.game.add.text(e.game.world.centerX,e.game.world.centerY,n,{font:"24px Arial",fill:"#ffffff",align:"center"});s.anchor.setTo(.5,.5);var o=e.game.add.tween(s);o.to({y:100},4e3,Phaser.Easing.Linear.None,!0),o.onComplete.add(function(){s.destroy()})},e.getTimeHMS=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e}();n.version="0.1.1",n.CanvasWidth=600,n.CanvasHeight=500,n.game=null,Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";(function(e){function t(){var e=480,t=800,r={width:e,height:t,renderer:Phaser.AUTO};new l(r)}var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};e.p2=r(20),e.PIXI=r(17),e.Phaser=r(18);var i=r(19),a=r(11),s=r(12),o=r(13),c=r(10),u=(r(15),r(0)),l=function(e){function t(t){var r=e.call(this,t)||this;return r.state.add("boot",a.default),r.state.add("preloader",s.default),r.state.add("title",o.default),r.state.add("MainGame",c.default),r.state.start("boot"),r}return n(t,e),t}(Phaser.Game);window.onload=function(){var e=null,r=["Barrio"];if(r.length>0&&(e=e||{},e.google={families:r}),Object.keys(u.CustomWebFonts).length>0){e=e||{},e.custom={families:[],urls:[]};for(var n in u.CustomWebFonts)e.custom.families.push(u.CustomWebFonts[n].getFamily()),e.custom.urls.push(u.CustomWebFonts[n].getCSS())}null===e?t():(e.active=t,i.load(e))}}).call(t,r(16))},function(e,t,r){e.exports=r.p+"assets/preload_sprites_array.json"},function(e,t,r){e.exports=r.p+"assets/preload_sprites_array.png"},function(e,t,r){e.exports=r.p+"assets/background.png"},function(e,t,r){e.exports=r.p+"assets/bird.png"},function(e,t,r){e.exports=r.p+"assets/ground.png"},function(e,t,r){e.exports=r.p+"assets/pipe.png"},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(1),a=function(e){function t(t){var r=e.call(this,t)||this;return r.m_array=[],r.m_idx=1,r.analyser=null,r.dataArray=null,r.bufferLength=0,r.listener=null,r.listenerContext=null,r.__init(),r}return n(t,e),t.prototype.setLister=function(e,t){this.listener=e,this.listenerContext=t},t.prototype.__init=function(){var e,t=new AudioContext;this.analyser=t.createAnalyser(),this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.analyser.smoothingTimeConstant=.85;var r=t.createWaveShaper(),n=t.createGain(),a=t.createBiquadFilter(),s=t.createConvolver(),o=this;navigator.getUserMedia?(console.log("getUserMedia supported."),navigator.getUserMedia({audio:!0},function(i){e=t.createMediaStreamSource(i),e.connect(o.analyser),o.analyser.connect(r),r.connect(a),a.connect(s),s.connect(n),n.connect(t.destination),o.visualize()},function(e){i.default.flyText("没有音频",e.name),o.visualize(),console.log("The following gUM error occured: "+e)})):(i.default.flyText("getUserMedia not supported"),console.log("getUserMedia not supported on your browser!"))},t.prototype.visualize=function(){this.analyser.fftSize=256,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.draw()},t.prototype.draw=function(){var e=480,t=800;requestAnimationFrame(this.draw.bind(this)),this.analyser.getByteFrequencyData(this.dataArray);var r,n=e/this.bufferLength*2.5,i=0;this.m_array=[];for(var a=0;a<this.bufferLength;a++)r=this.dataArray[a],this.m_array.push(new Phaser.Rectangle(i,t-r,n,r)),i+=n+1;this.listener&&this.listener(this.listenerContext,this.dataArray)},t.prototype.update=function(){for(var e=0;e<this.m_array.length;e++){var t=this.m_array[e];i.default.game.debug.geom(t,"rgb("+t.height+",50,50)")}},t}(Phaser.Group);Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(9),a=r(0),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wave=null,t.bird=null,t.pipes=null,t.score=0,t.labelScore=null,t.ground=null,t.timer=null,t.idx=0,t}return n(t,e),t.prototype.init=function(){},t.prototype.preload=function(){this.game.load.spritesheet("bird2","assets/bird.png",92,64)},t.prototype.create=function(){this.wave=new i.default(this),this.wave.setLister(this.soundContrlCallback,this),this.game.add.existing(this.wave),this.game.add.image(0,0,a.Images.ImagesBackground.getName()),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.bird=this.game.add.sprite(this.game.world.centerX-92,this.game.world.centerY,"bird2"),this.bird.anchor.setTo(-.1,.5),this.bird.animations.add("fly",[0,1,2]),this.bird.animations.play("fly",5,!0),this.bird.scale=new Phaser.Point(.6,.6),this.game.physics.arcade.enable(this.bird),this.bird.body.collide,this.bird.body.gravity.y=1e3,this.bird.body.collideWorldBounds=!0,this.pipes=this.game.add.group(),this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(this.jump,this),this.score=-1,this.labelScore=this.game.add.text(380,100,"0",{font:"bold 50pt Arial",fill:"#ffffff",aligen:"center"}),this.labelScore.setShadow(5,5,"#000000",0),this.ground=this.game.add.tileSprite(0,700,480,128,a.Images.ImagesGround.getName()),this.game.physics.arcade.enable(this.ground),this.ground.body.immovable=!0,this.ground.body.allowGravity=!1,this.timer=this.game.time.events.loop(2500,this.addPipeRow,this)},t.prototype.soundContrlCallback=function(e,t){for(var r=0,n=0;n<t.length;n++)r<t[n]&&(r=t[n]);r>60&&e.jump(r)},t.prototype.jump=function(e){this.bird.body.velocity.y=-e,this.game.add.tween(this.bird).to({angle:-20},100).start()},t.prototype.addPipe=function(e,t,r){void 0===r&&(r=0)},t.prototype.addPipeRow=function(){var e=Math.round(300*Math.random())+300;this.addPipe(450,e),this.addPipe(450,e-250,1),this.score+=1,this.labelScore.text=""+this.score},t.prototype.restartGame=function(){this.game.state.start("MainGame")},t.prototype.update=function(){this.bird.x<0&&this.restartGame(),this.game.physics.arcade.collide(this.bird,this.ground),this.bird.angle<30&&(this.bird.angle+=1),this.ground.tilePosition.x-=200*(this.game.time.elapsed/1e3)},t}(Phaser.State);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.preload=function(){this.game.load.atlasJSONArray(i.Atlases.AtlasesPreloadSpritesArray.getName(),i.Atlases.AtlasesPreloadSpritesArray.getPNG(),i.Atlases.AtlasesPreloadSpritesArray.getJSONArray())},t.prototype.create=function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.device.desktop,console.log("DEBUG....................... false \n           \nGIT_REVISION................ e2dff150d74916945555c7c19406995cc2c418bb\n           \nSCALE_MODE.................. SHOW_ALL\n           \nDEFAULT_GAME_WIDTH.......... 480\n           \nDEFAULT_GAME_HEIGHT......... 800\n           \nMAX_GAME_WIDTH.............. 480\n           \nMAX_GAME_HEIGHT............. 800 \n           \ngame.width.................. "+this.game.width+" \n           \ngame.height................. "+this.game.height+"\n           \nGOOGLE_WEB_FONTS............ "+["Barrio"]+"\n           \nSOUND_EXTENSIONS_PREFERENCE. "+["webm","ogg","m4a","mp3","aac","ac3","caf","flac","mp4","wav"]),this.game.state.start("preloader")},t}(Phaser.State);Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(0),a=r(14),s=r(1),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.preloadBarSprite=null,t.preloadFrameSprite=null,t}return n(t,e),t.prototype.preload=function(){this.preloadBarSprite=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,i.Atlases.AtlasesPreloadSpritesArray.getName(),i.Atlases.AtlasesPreloadSpritesArray.Frames.PreloadBar),this.preloadBarSprite.anchor.setTo(0,.5),this.preloadBarSprite.x-=.5*this.preloadBarSprite.width,this.preloadFrameSprite=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,i.Atlases.AtlasesPreloadSpritesArray.getName(),i.Atlases.AtlasesPreloadSpritesArray.Frames.PreloadFrame),this.preloadFrameSprite.anchor.setTo(.5),this.game.load.setPreloadSprite(this.preloadBarSprite),s.default.game=this.game,a.Loader.loadAllAssets(this.game,this.create,this)},t.prototype.create=function(){this.startGame()},t.prototype.startGame=function(){this.game.camera.onFadeComplete.addOnce(this.loadTitle,this),this.game.camera.fade(0,1e3)},t.prototype.loadTitle=function(){this.game.state.start("MainGame")},t}(Phaser.State);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundTemplateSprite=null,t.googleFontText=null,t.localFontText=null,t.bitmapFontText=null,t.sfxAudiosprite=null,t.sfxLaserSounds=null,t}return n(t,e),t.prototype.preload=function(){},t.prototype.create=function(){},t}(Phaser.State);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,r){"use strict";var n=r(0),i=function(){function e(){}return e.loadImages=function(){for(var e in n.Images)if(!this.game.cache.checkImageKey(n.Images[e].getName()))for(var t in n.Images[e])"getName"!==t&&this.game.load.image(n.Images[e].getName(),n.Images[e][t]())},e.loadAtlases=function(){for(var e in n.Atlases)if(!this.game.cache.checkImageKey(n.Atlases[e].getName())){var t=null,r=null;for(var i in n.Atlases[e])"getXML"===i||"getJSONArray"===i||"getJSONHash"===i?r=i:"getName"!==i&&"Frames"!==i&&(t=i);"getXML"===r?this.game.load.atlasXML(n.Atlases[e].getName(),n.Atlases[e][t](),n.Atlases[e].getXML()):"getJSONArray"===r?this.game.load.atlasJSONArray(n.Atlases[e].getName(),n.Atlases[e][t](),n.Atlases[e].getJSONArray()):"getJSONHash"===r&&this.game.load.atlasJSONHash(n.Atlases[e].getName(),n.Atlases[e][t](),n.Atlases[e].getJSONHash())}},e.orderAudioSourceArrayBasedOnSoundExtensionPreference=function(e){var t=this,r=[];for(var n in this.soundExtensionsPreference){var i=e.filter(function(e){return e.substring(e.lastIndexOf(".")+1,e.length)===t.soundExtensionsPreference[n]});r=r.concat(i)}return r},e.loadAudio=function(){for(var e in n.Audio){var t=n.Audio[e].getName();if(this.soundKeys.push(t),!this.game.cache.checkSoundKey(t)){var r=[];for(var i in n.Audio[e])"getName"!==i&&r.push(n.Audio[e][i]());r=this.orderAudioSourceArrayBasedOnSoundExtensionPreference(r),this.game.load.audio(t,r,!0)}}},e.loadAudiosprites=function(){for(var e in n.Audiosprites){var t=n.Audiosprites[e].getName();if(this.soundKeys.push(t),!this.game.cache.checkSoundKey(t)){var r=[];for(var i in n.Audiosprites[e])"getName"!==i&&"getJSON"!==i&&"Sprites"!==i&&r.push(n.Audiosprites[e][i]());r=this.orderAudioSourceArrayBasedOnSoundExtensionPreference(r),this.game.load.audiosprite(t,r,n.Audiosprites[e].getJSON(),null,!0)}}},e.loadBitmapFonts=function(){for(var e in n.BitmapFonts)if(!this.game.cache.checkBitmapFontKey(n.BitmapFonts[e].getName())){var t=null,r=null;for(var i in n.BitmapFonts[e])"getXML"===i||"getFNT"===i?r=i:"getName"!==i&&(t=i);this.game.load.bitmapFont(n.BitmapFonts[e].getName(),n.BitmapFonts[e][t](),n.BitmapFonts[e][r]())}},e.loadJSON=function(){for(var e in n.JSON)this.game.cache.checkJSONKey(n.JSON[e].getName())||this.game.load.json(n.JSON[e].getName(),n.JSON[e].getJSON(),!0)},e.loadXML=function(){for(var e in n.XML)this.game.cache.checkJSONKey(n.XML[e].getName())||this.game.load.xml(n.XML[e].getName(),n.XML[e].getXML(),!0)},e.loadText=function(){for(var e in n.Text)this.game.cache.checkJSONKey(n.Text[e].getName())||this.game.load.xml(n.Text[e].getName(),n.Text[e].getText(),!0)},e.loadAllAssets=function(e,t,r){this.game=e,t&&this.game.load.onLoadComplete.addOnce(t,r),this.loadImages(),this.loadAtlases(),this.loadAudio(),this.loadAudiosprites(),this.loadBitmapFonts(),this.loadJSON(),this.loadXML(),this.loadText()},e.waitForSoundDecoding=function(e,t){this.soundKeys.length>0?this.game.sound.setDecodedCallback(this.soundKeys,e,t):e.call(t)},e}();i.game=null,i.soundKeys=[],i.soundExtensionsPreference=["webm","ogg","m4a","mp3","aac","ac3","caf","flac","mp4","wav"],t.Loader=i},function(e,t,r){"use strict";var n;!function(e){e[e.PORTRAIT=0]="PORTRAIT",e[e.LANDSCAPE=1]="LANDSCAPE"}(n=t.ScreenOrientation||(t.ScreenOrientation={}));var i=function(){function e(){}return e}();t.ScreenMetrics=i;var a=function(){function e(){}return e.calculateScreenMetrics=function(e,t,r,a,s){void 0===r&&(r=n.LANDSCAPE),this.screenMetrics=new i,this.screenMetrics.windowWidth=window.innerWidth,this.screenMetrics.windowHeight=window.innerHeight,this.screenMetrics.defaultGameWidth=e,this.screenMetrics.defaultGameHeight=t;var o=this.screenMetrics.windowWidth<this.screenMetrics.windowHeight&&r===n.LANDSCAPE,c=this.screenMetrics.windowHeight<this.screenMetrics.windowWidth&&r===n.PORTRAIT;(o||c)&&(h=[this.screenMetrics.windowHeight,this.screenMetrics.windowWidth],this.screenMetrics.windowWidth=h[0],this.screenMetrics.windowHeight=h[1]),a&&s?(this.screenMetrics.maxGameWidth=a,this.screenMetrics.maxGameHeight=s):(n.LANDSCAPE,this.screenMetrics.maxGameWidth=Math.round(1*this.screenMetrics.defaultGameWidth),this.screenMetrics.maxGameHeight=Math.round(1*this.screenMetrics.defaultGameHeight));var u=r===n.LANDSCAPE?.6:800/480,l=this.screenMetrics.windowWidth/this.screenMetrics.windowHeight;return l>u?(this.screenMetrics.gameHeight=this.screenMetrics.defaultGameHeight,this.screenMetrics.gameWidth=2*Math.ceil(this.screenMetrics.gameHeight*l*.5),this.screenMetrics.gameWidth=Math.min(this.screenMetrics.gameWidth,this.screenMetrics.maxGameWidth),this.screenMetrics.offsetX=.5*(this.screenMetrics.gameWidth-this.screenMetrics.defaultGameWidth),this.screenMetrics.offsetY=0):(this.screenMetrics.gameWidth=this.screenMetrics.defaultGameWidth,this.screenMetrics.gameHeight=2*Math.ceil(this.screenMetrics.gameWidth/l*.5),this.screenMetrics.gameHeight=Math.min(this.screenMetrics.gameHeight,this.screenMetrics.maxGameHeight),this.screenMetrics.offsetX=0,this.screenMetrics.offsetY=.5*(this.screenMetrics.gameHeight-this.screenMetrics.defaultGameHeight)),this.screenMetrics.scaleX=this.screenMetrics.windowWidth/this.screenMetrics.gameWidth,this.screenMetrics.scaleY=this.screenMetrics.windowHeight/this.screenMetrics.gameHeight,this.screenMetrics;var h},e}();t.ScreenUtils=a;var s=function(){function e(){}return e.toCamelCase=function(e){return e.replace(/[^A-Za-z0-9]/g," ").replace(/^\w|[A-Z]|\b\w|\s+/g,function(e,t){return 0===+e||"-"===e||"."===e?"":0===t?e.toLowerCase():e.toUpperCase()})},e.toPascalCase=function(t){var r=e.toCamelCase(t);return r[0].toUpperCase()+r.substr(1)},e}();t.StringUtils=s},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=PIXI},function(e,t){e.exports=Phaser},function(e,t){e.exports=WebFont},function(e,t){e.exports=p2},function(e,t,r){e.exports=r(2)}]);