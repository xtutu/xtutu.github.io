function HHLog(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n="",i=0;i<arguments.length;i++)0!=i&&(n+=" "),n+=arguments[i];console.log(n)}function HHDebug(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n="",i=0;i<arguments.length;i++)0!=i&&(n+=" "),n+=arguments[i];console.log(n)}function HHError(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n="",i=0;i<arguments.length;i++)0!=i&&(n+=" "),n+=arguments[i];console.log(n)}var AssetAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?i(s):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var n=this.stage;UIManager.getInstance().setRoot(n),TipsManager.getInstance().setRoot(n),window.innerHeight/window.innerWidth>640/960?this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:this.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT,HHLog("inti stageSize",this.stage.stageWidth,this.stage.stageHeight),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},i.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&(this.loadingView=UIManager.getInstance().pushView(LoadingView))},i.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("loading",1),RES.loadGroup("preload")},i.onResourceLoadComplete=function(e){"loading"==e.groupName?(this.isResourceLoadEnd=!0,this.createScene()):"preload"==e.groupName&&(this.loadingView.setProgressLabel("加载完成，进入游戏..."),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),GameInfo.getInstance().onLoadInitResFinished())},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){"preload"==e.groupName&&this.setProgress(e.itemsLoaded,e.itemsTotal)},i.setProgress=function(e,t){this.loadingView.setProgressLabel(e+"/"+t)},t}(eui.UILayer);egret.registerClass(Main,"Main");var Role=function(){function e(){this.def=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(Role,"Role");var King=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(Role);egret.registerClass(King,"King");var Queen=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(Role);egret.registerClass(Queen,"Queen");var GameInfo=function(){function e(){if(this.systems=[],e._instance)throw new Error("Error: Instantiation failed");this.king=new King,this.systems.push(SocketUtil.getInstance()),this.systems.push(ScheduleUtil.getInstance())}var t=(__define,e),n=t.prototype;return e.getInstance=function(){return null===e._instance&&(e._instance=new e),e._instance},n.onLoadInitResFinished=function(){this.initSystems(),SocketUtil.getInstance().registCallback(SocketUtil.getInstance().mapNameToCode.Car,function(e){HHUtil.flyTextInSceneCenter(PARSE_STR("received: ##0##",e.text))})},n.initSystems=function(){this.systems.forEach(function(e){console.log("initSystems ",HHUtil.getClassName(e)),e.init()})},e._instance=null,e}();egret.registerClass(GameInfo,"GameInfo");var SystemBase=function(){function e(){}var t=(__define,e),n=t.prototype;return n.init=function(){},n.finalize=function(){},e}();egret.registerClass(SystemBase,"SystemBase");var ThemeAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getTheme=function(e,t,n,i){function s(e){t.call(i,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var GAME_WIDTH=960,GAME_HEIGHT=640,PARSE_STR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(arguments.length<0)return"";for(var n=arguments[0],i=1;i<arguments.length;i++){var s=arguments[i];n=n.replace(new RegExp("##"+(i-1)+"##","gm"),s)}return n},AUTOSTR=function(e){return e},HHUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.printObj=function(t,n){HHLog(e.getObjStr(t,n))},e.getObjStr=function(e,t){if(t){var n="\n-------\n";return n+=JSON.stringify(e,null,4),n+="\n-------\n"}var n="\n-------\n";for(var i in e)"function"!=typeof e[i]&&(n+=PARSE_STR("[##0##:##1##]\n",i,e[i]));return n+="-------\n"},e.RandByRange=function(e,t){if(e==t-1)return e;if(e==t)return t;if(e>t){var n=t;t=e,e=n}var i=Math.floor(Math.random()*(t-e));return e+i},e.RandEither=function(e,t){return 0==e?!1:e>=t?!0:Math.floor(Math.random()*t)<e?!0:!1},e.RandByRangeMulti=function(t,n,i){var s=[];if(t==n)return s;if(t>n){var o=n;n=t,t=o}if(i>=n-t){for(var r=t;n>r;r++)s.push(r);return s}for(var a=n-t,h=[],r=0;a>r;r++)h[r]=r;for(var r=0;i>r;r++){var c=e.RandByRange(0,a);s.push(t+h[c]),h[c]=h[a-1],a--}return s},e.padNumber=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},e.flyTextInSceneCenter=function(e){var t=UIManager.getInstance().getStage();if(t){var n=new eui.Label;t.addChild(n),n.textColor=16711680,n.strokeColor=16777215,n.stroke=3,n.size=28,n.x=t.stageWidth/2,n.y=t.stageHeight/2,n.text=e,n.anchorOffsetX=n.width/2,n.touchEnabled=!1,n.anchorOffsetY=n.height/2,egret.Tween.get(n,{loop:!1}).to({y:n.y-200},1e3).wait(500).call(function(){t.removeChild(n)})}},e.setNodePositionAtCenter=function(e){e.x=(UIManager.getInstance().getStage().stageWidth-e.width)/2,e.y=(UIManager.getInstance().getStage().stageHeight-e.height)/2},e.getParamFromUrl=function(e){var t=window.location.href,n=t.split("?"),i="";if(n[0]==t)return i;var s=n[1];n=s.split("&");for(var o=0;o<n.length;o++){s=n[o];var r=s.split("=");r.length<=1||r[0]==e&&(i=r[1])}return i},e.getClassName=function(e){if(e.prototype){if(e.prototype.__class__&&e.prototype.constructor)return e.prototype.__class__}else{if(!e.__proto__)return void console.warn(e,"is not a class!");if(e.__proto__.__class__&&e.__proto__.constructor)return e.__proto__.__class__}},e}();egret.registerClass(HHUtil,"HHUtil");var HttpClient=function(){function e(){if(e._instance)throw new Error("Error: Instantiation failed: Use HttpClient.getInstance() instead of new.");HHLog("HttpClient create"),this.init(),e._instance=this}var t=(__define,e),n=t.prototype;return e.getInstance=function(){return null===e._instance&&(e._instance=new e),e._instance},n.init=function(){},n.doGet=function(e,t,n){var i=new egret.HttpRequest,s=function(e){n(i.response)};e+="?";var o=0;for(var r in t)o>0&&(e+="&"),e=e+encodeURIComponent(r)+"="+encodeURIComponent(t[r]),o++;i.addEventListener(egret.Event.COMPLETE,s,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,s,this),i.open(e,egret.HttpMethod.GET),i.send()},n.doPost=function(e,t,n){var i=new egret.HttpRequest,s=function(e){n(i.response)},o="",r=0;for(var a in t)r>0&&(o+="&"),o=o+encodeURIComponent(a)+"="+encodeURIComponent(t[a]),r++;i.addEventListener(egret.Event.COMPLETE,s,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,s,this),i.open(e,egret.HttpMethod.POST),i.setRequestHeader("content-type","application/x-www-form-urlencoded"),i.send(o)},e._instance=null,e}();egret.registerClass(HttpClient,"HttpClient");var SocketBuffer=function(){function e(){this.socketBuffer=new egret.ByteArray}var t=(__define,e),n=t.prototype;return n.read=function(e){for(this.socketBuffer.position=this.socketBuffer.length,this.socketBuffer.writeBytes(e,0,e.length);;){if(this.socketBuffer.length<4)return;this.socketBuffer.position=0;var t=this.socketBuffer.readUnsignedShort();if(this.socketBuffer.position=0,t>this.socketBuffer.length)return void HHDebug("_read b ",t,this.socketBuffer.length);var n=new egret.ByteArray;n.writeBytes(this.socketBuffer,0,t),SocketUtil.getInstance().decodeProtoBuf(n);var i=new egret.ByteArray;i.writeBytes(this.socketBuffer,t,this.socketBuffer.length-t),this.socketBuffer=i}},e}();egret.registerClass(SocketBuffer,"SocketBuffer");var SocketUtil=function(e){function t(){if(e.call(this),this.socket=null,this.mapCodeToBuilder={},this.mapNameToCode={},this.mapCodeToCallback={},t._instance)throw new Error("Error: Instantiation failed: Use HttpClient.getInstance() instead of new.");HHLog("SocketUtil create"),t._instance=this,this.socketBuffer=new SocketBuffer}__extends(t,e);var n=(__define,t),i=n.prototype;return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},i.init=function(){e.prototype.init.call(this),this.initProtoBuilder()},i.finalize=function(){e.prototype.finalize.call(this)},i.connect=function(){this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.socket.connect("192.168.0.155",8080)},i.onSocketClose=function(){HHLog("WebSocketClose"),HHUtil.flyTextInSceneCenter("WebSocketClose")},i.onSocketError=function(){HHLog("WebSocketError"),HHUtil.flyTextInSceneCenter("WebSocketError")},i.sendData=function(e){this.socket.writeBytes(this.encodeProtoBuf(e)),this.socket.flush()},i.onSocketOpen=function(){HHLog("WebSocketOpen"),HHUtil.flyTextInSceneCenter("WebSocketOpen")},i.onReceiveMessage=function(e){HHLog("onReceiveMessage");var t=new egret.ByteArray;this.socket.readBytes(t),this.socketBuffer.read(t)},i.initProtoBuilder=function(){HHLog("initProtoBuilder");var e=RES.getRes("example_proto"),t=dcodeIO.ProtoBuf.loadProto(e),n=t.build();for(var i in n){var s=t.build(i);HHLog("code",s.$options.code),this.mapCodeToBuilder[s.$options.code]&&HHError("err, code repeated"),this.mapNameToCode[i]&&HHError("err, name repeated"),this.mapCodeToBuilder[s.$options.code]=s,this.mapNameToCode[i]=s.$options.code}},i.getProtoBuilderByName=function(e){return this.mapNameToCode[e]||HHLog("getProtoBuilderByName err",e),this.getProtoBuilder(this.mapNameToCode[e])},i.getProtoBuilder=function(e){return this.mapCodeToBuilder[e]||HHLog("getProtoBuilder err",e),this.mapCodeToBuilder[e]},i.decodeProtoBuf=function(e){e.position=0;var t=e.readUnsignedShort(),n=e.readUnsignedShort();if(HHLog("size",t,"opCode",n),!this.mapCodeToBuilder.hasOwnProperty(n))throw new Error("OpCode Not Exist, opCode="+n);var i=new egret.ByteArray;e.readBytes(i),i.length!=t-4&&HHUtil.flyTextInSceneCenter(PARSE_STR("长度不一致 ##0##, ##1##, ##2##",i,t-4,n));var s=null;try{s=this.mapCodeToBuilder[n].decode(i.buffer)}catch(o){HHLog("data decode error, code="+n)}for(var r in this.mapCodeToCallback)if(r==n)return void this.mapCodeToCallback[r](s)},i.encodeProtoBuf=function(e){var t=e.toArrayBuffer();HHLog("dataBuffer size",t.byteLength);var n=new egret.ByteArray,i=e.$options.code,s=4+t.byteLength;n.writeUnsignedShort(s),n.writeUnsignedShort(i);var o=new egret.ByteArray(t);return n.writeBytes(o,0,o.length),n.position=0,HHLog(PARSE_STR("after code=##0##, size=##1##  finalByteArray.length= ##2##",i,s,n.length)),n.position=0,n},i.registCallback=function(e,t){var n=0;if(n="string"==typeof e?this.mapNameToCode[e]:e,this.mapCodeToCallback[n])throw new Error("registCallback err "+n);this.mapCodeToCallback[n]=t},t._instance=null,t}(SystemBase);egret.registerClass(SocketUtil,"SocketUtil");var ScheduleItem=function(){function e(e,t,n,i){this.m_callback=null,this.m_target=null,this.m_interval=0,this.m_intevalAdded=0,this.m_delay=0,this.m_isValid=!0,void 0===t&&(t=null),void 0===n&&(n=0),void 0===i&&(i=0),this.m_callback=e,this.m_target=t,this.m_delay=i,this.m_interval=n,this.m_isValid=!0}var t=(__define,e),n=t.prototype;return n.Update=function(e){if(this.m_delay>0&&e<=this.m_delay)return void(this.m_delay-=e);if(this.m_delay>0&&e>this.m_delay&&(e-=this.m_delay,this.m_delay=0),this.m_intevalAdded+=e,this.m_intevalAdded>=this.m_interval){this.m_interval;this.m_callback.call(this.m_target,this.m_intevalAdded),this.m_intevalAdded=0}},e}();egret.registerClass(ScheduleItem,"ScheduleItem");var ScheduleUtil=function(e){function t(){if(e.call(this),this.m_timeScale=1,this.m_lastTimeLeft=0,this.m_scheduleList=null,this.m_secondPerFrame=1/30,t._instance)throw new Error("Error: Instantiation failed: Use TipsManager.getInstance() instead of new.");HHLog("ScheduleUtil create"),t._instance=this,this.m_scheduleList=[],this.timer=new egret.Timer(30),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start()}__extends(t,e);var n=(__define,t),i=n.prototype;return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},i.init=function(){e.prototype.init.call(this)},i.finalize=function(){e.prototype.finalize.call(this),this.removeAllSchedule()},i.timerFunc=function(){this.update(30)},i.timerComFunc=function(){},i.update=function(e){if(!(0>e)){for(e*=this.m_timeScale,e+=this.m_lastTimeLeft;e>=this.m_secondPerFrame;)e-=this.m_secondPerFrame,this._UpdateFuction(this.m_secondPerFrame);this.m_lastTimeLeft=e}},i._UpdateFuction=function(e){var t=[].concat(this.m_scheduleList);for(var n in t){var i=t[n];i.m_isValid&&i.Update(e)}},i.setTimeScale=function(e){this.m_timeScale=e},i.addSchedule=function(e,t,n,i){var s=new ScheduleItem(e,t,n,i);this.m_scheduleList.push(s)},i.removeSchedule=function(e,t){for(var n=!0;n;){for(var i=0;i<this.m_scheduleList.length;i++){var s=this.m_scheduleList[i];if(s.m_callback==t&&s.m_target==e){s.m_isValid=!1,this.m_scheduleList.splice(i,1),n=!0;break}}n=!1}},i.removeScheduleByCallback=function(e){for(var t=!0;t;){for(var n=0;n<this.m_scheduleList.length;n++){var i=this.m_scheduleList[n];if(i.m_callback==e){i.m_isValid=!1,this.m_scheduleList.splice(n,1),t=!0;break}}t=!1}},i.removeScheduleByTarget=function(e){for(var t=!0;t;){for(var n=0;n<this.m_scheduleList.length;n++){var i=this.m_scheduleList[n];if(i.m_target==e){i.m_isValid=!1,this.m_scheduleList.splice(n,1),t=!0;break}}t=!1}},i.removeAllSchedule=function(){for(var e=0;e<this.m_scheduleList.length;e++){var t=this.m_scheduleList[e];t.m_isValid=!1}this.m_scheduleList=[]},t._instance=null,t}(SystemBase);egret.registerClass(ScheduleUtil,"ScheduleUtil");var TipsManager=function(){function e(){if(this.views=[],this.currentView=null,this.idxInStage=2,e._instance)throw new Error("Error: Instantiation failed: Use TipsManager.getInstance() instead of new.");HHLog("TipsManager create"),this.init(),e._instance=this}var t=(__define,e),n=t.prototype;return e.getInstance=function(){return null===e._instance&&(e._instance=new e),e._instance},n.init=function(){},n.setRoot=function(e){this._root=e},n.pushView=function(e){HHLog("pushView = "+e.name),this.currentView&&(this._root.removeChild(this.currentView),HHLog("remove view",this.currentView));for(var t=-1,n=0;n<this.views.length;n++)if(this.views[n]==e){t=n,HHLog("already exists");break}if(-1!=t)for(var n=this.views.length-1;n>=0&&this.views[n]!=e;n--)this.popView();else this.views.push(e),this.currentView=e,this._root.addChildAt(this.currentView,this.idxInStage);return this.currentView},n.popView=function(){if(HHLog("popView... length = "+this.views.length),this.views.length<=0)return void HHLog("error popView lenght = "+this.views.length);if(this.currentView&&(this._root.removeChild(this.currentView),HHLog("remove view",this.currentView)),this.views.pop(),this.currentView=null,!(this.views.length<=0)){var e=this.views[this.views.length-1];this.currentView=e,this._root.addChildAt(this.currentView,this.idxInStage)}},n.getStage=function(){return e.getInstance()._root},e._instance=null,e}();egret.registerClass(TipsManager,"TipsManager");var UIManager=function(){function e(){if(this.views=[],this.currentView=null,e._instance)throw new Error("Error: Instantiation failed: Use UIManager.getInstance() instead of new.");HHLog("UIManager create"),this.init(),e._instance=this;var t=this;window.onresize=function(){setTimeout(t.onWindowResize.bind(t),300)}}var t=(__define,e),n=t.prototype;return n.onWindowResize=function(){this.currentView&&this.currentView.onResize()},e.getInstance=function(){return null===e._instance&&(e._instance=new e),e._instance},n.init=function(){},n.setRoot=function(e){this._root=e},n.pushView=function(e){HHLog("pushView = "+e.name),this.currentView&&(this._root.removeChild(this.currentView),HHLog("remove view",this.currentView));for(var t=-1,n=0;n<this.views.length;n++)if(this.views[n]==e){t=n,HHLog("already exists");break}if(-1!=t)for(var n=this.views.length-1;n>=0&&this.views[n]!=e;n--)this.popView();else this.views.push(e),this.currentView=new e,this._root.addChildAt(this.currentView,1);return this.currentView},n.popView=function(){if(HHLog("popView... length = "+this.views.length),this.views.length<=0)return void HHLog("error popView lenght = "+this.views.length);if(this.currentView&&(this._root.removeChild(this.currentView),HHLog("remove view",this.currentView)),this.views.pop(),this.currentView=null,this.views.length<=0)return void HHLog("popView error : ",this.views.length);var e=this.views[this.views.length-1];this.currentView=new e,this._root.addChildAt(this.currentView,1)},n.getStage=function(){return e.getInstance()._root},e._instance=null,e}();egret.registerClass(UIManager,"UIManager");var EUIViewBase=function(e){function t(){e.call(this),this.buttons=[],this.tweens=[],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onEnter,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onExit,this),this.onResize()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onEnter=function(){},i.onExit=function(){this.removeAllTween(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onEnter,this)},i.onResize=function(){this.width=UIManager.getInstance().getStage().stageWidth,this.height=UIManager.getInstance().getStage().stageHeight},i.removeAllTween=function(){HHLog("removeAllTween length",this.tweens.length);for(var e=0;e<this.tweens.length;e++)egret.Tween.removeTweens(this.tweens[e]);this.tweens=[]},i.addTweenObj=function(e){this.tweens.push(e)},t}(eui.Component);egret.registerClass(EUIViewBase,"EUIViewBase");var TipsViewBase=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createChildren=function(){e.prototype.createChildren.call(this),HHUtil.setNodePositionAtCenter(this);var t=new TouchBlock;this.addChildAt(t,0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBlock,this)},i.onTouchBlock=function(e){HHLog("onTouchBlock",this.x,this.y)},i.onResize=function(){},t}(EUIViewBase);egret.registerClass(TipsViewBase,"TipsViewBase");var OkCancelTips=function(e){function t(t,n){e.call(this),this.skinName="skins.OkCancelTipsSkin",this.contentLabel.text=t,this.okCallback=n}__extends(t,e);var n=(__define,t),i=n.prototype;return t.create=function(e,n){TipsManager.getInstance().pushView(new t(e,n))},i.onExit=function(){e.prototype.onExit.call(this)},i.createChildren=function(){e.prototype.createChildren.call(this),this.okButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk,this),this.cancelButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancel,this)},i.onOk=function(e){HHDebug("on OK"),TipsManager.getInstance().popView(),this.okCallback&&this.okCallback()},i.onCancel=function(e){HHDebug("on Cancel"),TipsManager.getInstance().popView()},i.setContent=function(e){this.contentLabel.text=e},t}(TipsViewBase);egret.registerClass(OkCancelTips,"OkCancelTips");var OkTips=function(e){function t(t,n){e.call(this),this.skinName="skins.OkTipsSkin",this.contentLabel.text=t,this.okCallback=n}__extends(t,e);var n=(__define,t),i=n.prototype;return t.create=function(e,n){TipsManager.getInstance().pushView(new t(e,n))},i.onExit=function(){e.prototype.onExit.call(this)},i.createChildren=function(){e.prototype.createChildren.call(this),this.okButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk,this)},i.onOk=function(e){TipsManager.getInstance().popView(),this.okCallback&&this.okCallback()},i.setContent=function(e){this.contentLabel.text=e},t}(TipsViewBase);egret.registerClass(OkTips,"OkTips");var TouchBlock=function(e){function t(){e.call(this),this.touchEnabled=!0}__extends(t,e);var n=(__define,t),i=n.prototype;return i.$hitTest=function(e,t){return this},t}(egret.DisplayObject);egret.registerClass(TouchBlock,"TouchBlock");var LoadingView=function(e){function t(){e.call(this),this.sprite=null,this.progressLabel=null,this.skinName="resource/skin/views/LoadingSkin.exml",this.startButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonStart,this),this.sendButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonSend,this),this.connectButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonConnect,this),this.popPanelButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonPopPanel,this),this.loginButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonLogin,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onButtonLogin=function(e){UIManager.getInstance().pushView(LoginView)},i.onButtonPopPanel=function(){TipsManager.getInstance().pushView(new OkCancelTips((new Date).toLocaleTimeString(),function(){TipsManager.getInstance().pushView(new OkCancelTips("再来一次报时:"+(new Date).toLocaleTimeString(),null))}))},i.onButtonStart=function(){UIManager.getInstance().pushView(MainInterview)},i.onButtonConnect=function(){SocketUtil.getInstance().connect()},i.onButtonSend=function(){var e=SocketUtil.getInstance().getProtoBuilderByName("Car"),t=new e({text:"from egret",a1:!0,a2:10,a3:100,a4:1.111,a5:Math.random(),a6:(new Date).toString()});SocketUtil.getInstance().sendData(t)},i.onTouch=function(e){switch(HHLog(PARSE_STR("test :(##0##, ##1##)  (##2##,##3##)",e.localX,e.localY,e.stageX,e.stageY)),e.type){case egret.TouchEvent.TOUCH_BEGIN:break;case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.TOUCH_END:}},i.setProgressLabel=function(e){this.progressLabel.text=e},t}(EUIViewBase);egret.registerClass(LoadingView,"LoadingView");var LoginView=function(e){function t(){e.call(this),this.skinName="skins.LoginViewSkin"}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createChildren=function(){e.prototype.createChildren.call(this),this.backButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackButton,this),this.initButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonInit,this),this.loginButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonLogin,this),this.payButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonPay,this)},i.onEnter=function(){e.prototype.onEnter.call(this)},i.onExit=function(){e.prototype.onExit.call(this),ScheduleUtil.getInstance().removeScheduleByTarget(this)},i.onBackButton=function(e){UIManager.getInstance().popView()},i.onButtonInit=function(e){HHLog("onButtonInit");var t={};t.egretAppId=90005,t.version=2,t.debug=!0,nest.core.startup(t,function(e){HHLog("xxxxxxxx",e),HHUtil.printObj(e),HHUtil.flyTextInSceneCenter("init result"+e.result)}.bind(this))},i.onButtonLogin=function(e){HHLog("onButtonLogin");var t={};nest.user.checkLogin(t,this.onCheckLoginCallback.bind(this))},i.onCheckLoginCallback=function(e){if(e.token)HHLog("已经登入过..."),this.onLoginCallback(e);else{HHLog("\n正在登录...");var t={};nest.user.login(t,this.onLoginCallback.bind(this))}},i.onLoginCallback=function(e){HHLog("onLoginCallback"),HHUtil.printObj(e)},i.onButtonPay=function(e){HHLog("testPay");var t={goodsId:"testpay2",goodsNumber:"1",serverId:"1",ext:"1"};nest.iap.pay(t,function(e){HHLog("testPay",HHUtil.getObjStr(e))})},t}(EUIViewBase);egret.registerClass(LoginView,"LoginView");var MainInterview=function(e){function t(){e.call(this),this.groupLeft=null,this.groupRight=null,this.skinName="skins.MainIntervViewSkin"}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createChildren=function(){e.prototype.createChildren.call(this),this.testButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestButton,this),this.menuButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenuButton,this),this.backButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackButton,this),this.buyDiamondButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyDiamondButton,this),this.initView(),this.progressLeft.value=30,ScheduleUtil.getInstance().addSchedule(this.timerHandler,this,30),this.progressLeft.labelDisplay.textColor=0,this.mainMenu=new MainInterViewMenu,this.mainMenu.y=11,this.mainMenu.x=80,this.groupBottom.addChild(this.mainMenu)},i.onEnter=function(){e.prototype.onEnter.call(this)},i.onExit=function(){e.prototype.onExit.call(this),ScheduleUtil.getInstance().removeScheduleByTarget(this)},i.timerHandler=function(e){this.progressLeft.value+=2,this.progressLeft.value>=100&&(this.progressLeft.value=0)},i.initView=function(){this.listLeft=new eui.List;var e=[1,2,3,4,5,6,7,8,9,10,11,12];this.listLeft.dataProvider=new eui.ArrayCollection(e),this.scrollerLeft=new eui.Scroller,this.scrollerLeft.height=340,this.scrollerLeft.viewport=this.listLeft,this.scrollerLeft.y=100,this.groupLeft.addChild(this.scrollerLeft),this.listLeft.itemRenderer=RoleInfoView},i.onTestButton=function(e){UIManager.getInstance().pushView(ViewTest)},i.onMenuButton=function(e){1==MainInterViewSystem.getInstance().mainMenuSatus?this.mainMenu.disappear():this.mainMenu.display(),MainInterViewSystem.getInstance().mainMenuSatus=1-MainInterViewSystem.getInstance().mainMenuSatus},i.onBackButton=function(e){UIManager.getInstance().popView()},i.onBuyDiamondButton=function(e){TipsManager.getInstance().pushView(new OkCancelTips("确定购买9999个钻石吗",function(){HHUtil.flyTextInSceneCenter("购买成功啦。。。")}))},t}(EUIViewBase);egret.registerClass(MainInterview,"MainInterview");var MainInterViewMenu=function(e){function t(){e.call(this),this.defaultY=0,this.topY=-15,this.bottomY=200,this.skinName="skins.MainMenuSkin"}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onExit=function(){e.prototype.onExit.call(this)},i.onResize=function(){},i.createChildren=function(){e.prototype.createChildren.call(this),this.map.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMap,this),this.factory.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFactory,this),this.barracks.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarracks,this),this.buttons=[this.factory,this.barracks,this.map,this.b4,this.b5,this.b6,this.b7],this.setPosYByStatus()},i.onMap=function(e){HHDebug("onMap"),OkCancelTips.create("onMap",null)},i.onFactory=function(e){HHDebug("onFactory"),OkCancelTips.create("onFactory",null)},i.onBarracks=function(e){HHDebug("onBarracks"),OkCancelTips.create("onBarracks",null)},i.display=function(){for(var e=70,t=0;t<this.buttons.length;t++){var n=this.buttons[t];egret.Tween.get(n).wait(t*e).to({y:0},220)}},i.disappear=function(){for(var e=70,t=0;t<this.buttons.length;t++){var n=this.buttons[t];egret.Tween.get(n).wait(t*e).to({y:this.topY},60).to({y:this.bottomY},300)}},i.setPosYByStatus=function(){for(var e=MainInterViewSystem.getInstance().mainMenuSatus,t=0;t<this.buttons.length;t++)0==e?this.buttons[t].y=this.bottomY:this.buttons[t].y=this.defaultY},t}(EUIViewBase);egret.registerClass(MainInterViewMenu,"MainInterViewMenu");var MainInterViewSystem=function(e){function t(){if(e.call(this),t._instance)throw new Error("Error: Instantiation failed: Use UIManager.getInstance() instead of new.");this.mainMenuSatus=0}__extends(t,e);var n=(__define,t),i=n.prototype;return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},i.finalize=function(){this.mainMenuSatus=1},t._instance=null,t}(SystemBase);egret.registerClass(MainInterViewSystem,"MainInterViewSystem");var RoleInfoView=function(e){function t(){e.call(this),this.skinName="skins.RoleInfoSkin"}__extends(t,e);var n=(__define,t),i=n.prototype;return i.dataChanged=function(){HHLog("data dataChanged",this.data),this.att1.text=this.data},i.createChildren=function(){e.prototype.createChildren.call(this),this.button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButton,this)},i.onButton=function(e){HHLog("click",this.data),OkTips.create("我是 "+this.data)},t}(eui.ItemRenderer);egret.registerClass(RoleInfoView,"RoleInfoView");var ViewBase=function(e){function t(){e.call(this),this.buttons=[],this.tweens=[],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onEnter,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onExit,this),this.addEventListener(egret.Event.RESIZE,this.onResize,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onEnter=function(e){},i.onExit=function(e){this.removeAllTween(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onEnter,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onExit,this)},i.onResize=function(){HHLog("ViewBase resize.......",this.width,this.height)},i.removeAllTween=function(){HHLog("removeAllTween length",this.tweens.length);for(var e=0;e<this.tweens.length;e++)egret.Tween.removeTweens(this.tweens[e]);this.tweens=[]},i.addTestButton=function(e,t,n){var i=new eui.Button;return i.label=e,i.x=0,i.y=UIManager.getInstance().getStage().stageHeight-60*this.buttons.length-60,i.addEventListener(egret.TouchEvent.TOUCH_TAP,t,n),this.buttons.push(i),this.addChild(i),i},i.addTweenObj=function(e){this.tweens.push(e)},t}(eui.Component);egret.registerClass(ViewBase,"ViewBase");var ViewTest=function(e){function t(){e.call(this),this.sprite=null,this.nameTest="testNode",this.moveNode=null,this.alphaNode=null,this.rotationNode=null,this.createView()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createView=function(){this.sprite=new egret.Sprite,this.sprite.width=300,this.sprite.height=300,this.sprite.touchEnabled=!0,this.sprite.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.sprite.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.sprite.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.addChild(this.sprite),this.addTestButton("返回",function(){UIManager.getInstance().popView()},null);var e=this;this.addTestButton("Tween",function(){e.clearTest(),e.testTween()}.bind(this),null),this.addTestButton("飘文字",function(){e.clearTest(),e.testFlyText()}.bind(this),null),this.addTestButton("JS模块",function(){e.clearTest(),e.testJsModule()}.bind(this),null),this.addTestButton("TestTouch",function(){UIManager.getInstance().pushView(ViewTestTouch)}.bind(this),null),this.addTestButton("test delete",function(){var e={};e.a=1,e.b=2,e.a=void 0,console.log(e);for(var t in e)console.log(t)}.bind(this),null)},i.testSocket=function(){SocketUtil.getInstance().connect()},i.onTouch=function(e){switch(HHLog(PARSE_STR("test :(##0##, ##1##)  (##2##,##3##)",e.localX,e.localY,e.stageX,e.stageY)),e.type){case egret.TouchEvent.TOUCH_BEGIN:break;
case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.TOUCH_END:}},i.clearTest=function(){var e=this.getChildByName(this.nameTest);e&&(this.removeChild(e),this.removeAllTween())},i.testTween=function(){var e=new egret.DisplayObjectContainer;e.name=this.nameTest,e.y=200,this.addChild(e);var t=RES.getRes("panel_back_png");this.moveNode=new egret.Bitmap,this.moveNode.texture=t,this.moveNode.x=50,this.moveNode.y=50,e.addChild(this.moveNode),this.addTweenObj(egret.Tween.get(this.moveNode,{loop:!0}).to({x:250},2e3).to({x:50},2e3).call(function(){console.log("Hello,Tween!")})),this.addTweenObj(this.moveNode),this.alphaNode=new egret.Bitmap,this.alphaNode.texture=t,this.alphaNode.x=250,this.alphaNode.y=50,e.addChild(this.alphaNode),egret.Tween.get(this.alphaNode,{loop:!0}).to({alpha:0},1e3).to({alpha:1},1e3),this.addTweenObj(this.alphaNode),this.rotationNode=new egret.Bitmap,this.rotationNode.texture=t,this.rotationNode.x=150,this.rotationNode.y=150,e.addChild(this.rotationNode),egret.Tween.get(this.rotationNode,{loop:!0}).to({rotation:360},2e3).wait(500),this.addTweenObj(this.rotationNode)},i.testFlyText=function(){HHUtil.flyTextInSceneCenter("我是文字"+HHUtil.RandByRange(1,1e5))},i.testJsModule=function(){for(var e=0;e<globalTest.length;e++)HHLog("global ",e,globalTest[e]);share("123"),JsTest.test("123","456","abc","def")},t}(ViewBase);egret.registerClass(ViewTest,"ViewTest");var ViewTestTouch=function(e){function t(){e.call(this),this.btn1=null,this.btn2=null,this.createView()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createView=function(){UIManager.getInstance().getStage().addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchView,this,!0),UIManager.getInstance().getStage().addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchView,this);var e=new egret.Sprite;e.graphics.beginFill(0,1),e.graphics.drawRect(0,0,100,200),e.graphics.endFill(),e.touchEnabled=!0,e.width=100,e.height=200,e.x=180,e.y=150,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch0,this,!0),this.addChild(e);var t=new egret.Sprite;t.graphics.beginFill(65280,1),t.graphics.drawRect(0,0,100,80),t.graphics.endFill(),t.touchEnabled=!0,t.width=100,t.height=80,t.x=50,t.y=20,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch1,this,!0),e.addChild(t);var n=new egret.Sprite;n.graphics.beginFill(986895,1),n.graphics.drawRect(0,0,100,80),n.graphics.endFill(),n.x=80,n.y=60,n.width=100,n.height=80,n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch2,this),e.addChild(n),this.addTestButton("返回",function(){UIManager.getInstance().popView()},null)},i.onTouchView=function(e){switch(HHLog(PARSE_STR("onTouchView :(##0##, ##1##)  (##2##,##3##) ##4##",e.localX,e.localY,e.stageX,e.stageY,e.type)),e.type){case egret.TouchEvent.TOUCH_BEGIN:break;case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.TOUCH_END:}},i.onTouch0=function(e){HHLog(PARSE_STR("onTouch0 :(##0##, ##1##)  (##2##,##3##) ##4##",e.localX,e.localY,e.stageX,e.stageY,e.type)),HHLog("bubble",e.bubbles)},i.onTouch1=function(e){switch(HHLog(PARSE_STR("onTouch1 :(##0##, ##1##)  (##2##,##3##) ##4##",e.localX,e.localY,e.stageX,e.stageY,e.type)),e.type){case egret.TouchEvent.TOUCH_BEGIN:break;case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.TOUCH_END:}},i.onTouch2=function(e){switch(HHLog(PARSE_STR("onTouch2 :(##0##, ##1##)  (##2##,##3##) ##4##",e.localX,e.localY,e.stageX,e.stageY,e.type)),e.type){case egret.TouchEvent.TOUCH_BEGIN:break;case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.TOUCH_END:}},t}(ViewBase);egret.registerClass(ViewTestTouch,"ViewTestTouch");